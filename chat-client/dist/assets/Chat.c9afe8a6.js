var _t=Object.defineProperty;var kt=(o,e,t)=>e in o?_t(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var se=(o,e,t)=>(kt(o,typeof e!="symbol"?e+"":e,t),t);import{i as Ct,a as Je,r as Et,b as Q,g as ao,c as jo,u as Ko,d as D,e as l,f as St,h as Xo,j as B,t as xo,k as Io,w as J,l as At,o as Dt,m as It,N as to,n as X,p as H,q as Go,s as ae,v as Jo,x as me,y as To,z as m,A as F,B as _,C as ze,D as Fe,E as f,F as E,G as re,T as wo,_ as te,H as k,I as b,J as Z,K as W,L as ee,M as Ce,O as Tt,P as xe,Q as no,R as Zo,S as be,U as Bt,V as q,W as ke,X as N,Y as Nt,Z as we,$ as Oe,a0 as Re,a1 as U,a2 as Lt,a3 as $e,a4 as De,a5 as Qo,a6 as Bo,a7 as Rt,a8 as Me,a9 as No,aa as Ot,ab as et,ac as ot,ad as qe,ae as Y,af as _o,ag as tt,ah as so,ai as ge,aj as rt,ak as Lo,al as $t,am as zt,an as Ft,ao as Mt,ap as Pt,aq as Vt,ar as Ht,as as qt,at as Yt,au as Ut,av as Pe,aw as Se,ax as Wt,ay as jt,az as Kt,aA as lt,aB as Xt,aC as Gt,aD as oe,aE as ko,aF as Jt,aG as co,aH as po,aI as Zt,aJ as Qt,aK as er,aL as or,aM as tr,aN as it,aO as rr,aP as Ro,aQ as Ie,aR as _e,aS as ho,aT as Ze,aU as lr,aV as Ve,aW as Co,aX as Eo,aY as at,aZ as uo,a_ as ir,a$ as ar,b0 as nr,b1 as sr}from"./index.7502c1f2.js";var cr=/\s/;function pr(o){for(var e=o.length;e--&&cr.test(o.charAt(e)););return e}var dr=/^\s+/;function hr(o){return o&&o.slice(0,pr(o)+1).replace(dr,"")}var Oo=0/0,ur=/^[-+]0x[0-9a-f]+$/i,fr=/^0b[01]+$/i,gr=/^0o[0-7]+$/i,mr=parseInt;function $o(o){if(typeof o=="number")return o;if(Ct(o))return Oo;if(Je(o)){var e=typeof o.valueOf=="function"?o.valueOf():o;o=Je(e)?e+"":e}if(typeof o!="string")return o===0?o:+o;o=hr(o);var t=fr.test(o);return t||gr.test(o)?mr(o.slice(2),t?2:8):ur.test(o)?Oo:+o}var br=function(){return Et.Date.now()},ro=br,yr="Expected a function",vr=Math.max,xr=Math.min;function wr(o,e,t){var r,a,s,n,c,i,p=0,u=!1,g=!1,d=!0;if(typeof o!="function")throw new TypeError(yr);e=$o(e)||0,Je(t)&&(u=!!t.leading,g="maxWait"in t,s=g?vr($o(t.maxWait)||0,e):s,d="trailing"in t?!!t.trailing:d);function C(h){var A=r,O=a;return r=a=void 0,p=h,n=o.apply(O,A),n}function x(h){return p=h,c=setTimeout(T,e),u?C(h):n}function w(h){var A=h-i,O=h-p,z=e-A;return g?xr(z,s-O):z}function S(h){var A=h-i,O=h-p;return i===void 0||A>=e||A<0||g&&O>=s}function T(){var h=ro();if(S(h))return $(h);c=setTimeout(T,w(h))}function $(h){return c=void 0,d&&r?C(h):(r=a=void 0,n)}function P(){c!==void 0&&clearTimeout(c),p=0,r=i=a=c=void 0}function M(){return c===void 0?n:$(ro())}function v(){var h=ro(),A=S(h);if(r=arguments,a=this,i=h,A){if(c===void 0)return x(i);if(g)return clearTimeout(c),c=setTimeout(T,e),C(i)}return c===void 0&&(c=setTimeout(T,e)),n}return v.cancel=P,v.flush=M,v}var _r="Expected a function";function lo(o,e,t){var r=!0,a=!0;if(typeof o!="function")throw new TypeError(_r);return Je(t)&&(r="leading"in t?!!t.leading:r,a="trailing"in t?!!t.trailing:a),wr(o,e,{leading:r,maxWait:e,trailing:a})}const kr=(o,e)=>{if(!Q||!o||!e)return!1;const t=o.getBoundingClientRect();let r;return e instanceof Element?r=e.getBoundingClientRect():r={top:0,right:window.innerWidth,bottom:window.innerHeight,left:0},t.top<r.bottom&&t.bottom>r.top&&t.right>r.left&&t.left<r.right},Cr=(o,e)=>{if(!Q)return!1;const t={undefined:"overflow",true:"overflow-y",false:"overflow-x"}[String(e)],r=ao(o,t);return["scroll","auto","overlay"].some(a=>r.includes(a))},Er=(o,e)=>{if(!Q)return;let t=o;for(;t;){if([window,document,document.documentElement].includes(t))return window;if(Cr(t,e))return t;t=t.parentNode}return t};let Ye;const Sr=()=>{var o;if(!Q)return 0;if(Ye!==void 0)return Ye;const e=document.createElement("div");e.className="el-scrollbar__wrap",e.style.visibility="hidden",e.style.width="100px",e.style.position="absolute",e.style.top="-9999px",document.body.appendChild(e);const t=e.offsetWidth;e.style.overflow="scroll";const r=document.createElement("div");r.style.width="100%",e.appendChild(r);const a=r.offsetWidth;return(o=e.parentNode)==null||o.removeChild(e),Ye=t-a,Ye},Ar=o=>["",...jo].includes(o);var je=(o=>(o[o.TEXT=1]="TEXT",o[o.CLASS=2]="CLASS",o[o.STYLE=4]="STYLE",o[o.PROPS=8]="PROPS",o[o.FULL_PROPS=16]="FULL_PROPS",o[o.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",o[o.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",o[o.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",o[o.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",o[o.NEED_PATCH=512]="NEED_PATCH",o[o.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",o[o.HOISTED=-1]="HOISTED",o[o.BAIL=-2]="BAIL",o))(je||{});const Dr=()=>Q&&/firefox/i.test(window.navigator.userAgent),nt=Symbol("scrollbarContextKey");var Ir={name:"en",el:{colorpicker:{confirm:"OK",clear:"Clear",defaultLabel:"color picker",description:"current color is {color}. press enter to select a new color."},datepicker:{now:"Now",today:"Today",cancel:"Cancel",clear:"Clear",confirm:"OK",dateTablePrompt:"Use the arrow keys and enter to select the day of the month",monthTablePrompt:"Use the arrow keys and enter to select the month",yearTablePrompt:"Use the arrow keys and enter to select the year",selectedDate:"Selected date",selectDate:"Select date",selectTime:"Select time",startDate:"Start Date",startTime:"Start Time",endDate:"End Date",endTime:"End Time",prevYear:"Previous Year",nextYear:"Next Year",prevMonth:"Previous Month",nextMonth:"Next Month",year:"",month1:"January",month2:"February",month3:"March",month4:"April",month5:"May",month6:"June",month7:"July",month8:"August",month9:"September",month10:"October",month11:"November",month12:"December",week:"week",weeks:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},weeksFull:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"},months:{jan:"Jan",feb:"Feb",mar:"Mar",apr:"Apr",may:"May",jun:"Jun",jul:"Jul",aug:"Aug",sep:"Sep",oct:"Oct",nov:"Nov",dec:"Dec"}},inputNumber:{decrease:"decrease number",increase:"increase number"},select:{loading:"Loading",noMatch:"No matching data",noData:"No data",placeholder:"Select"},dropdown:{toggleDropdown:"Toggle Dropdown"},cascader:{noMatch:"No matching data",loading:"Loading",placeholder:"Select",noData:"No data"},pagination:{goto:"Go to",pagesize:"/page",total:"Total {total}",pageClassifier:"",deprecationWarning:"Deprecated usages detected, please refer to the el-pagination documentation for more details"},dialog:{close:"Close this dialog"},drawer:{close:"Close this dialog"},messagebox:{title:"Message",confirm:"OK",cancel:"Cancel",error:"Illegal input",close:"Close this dialog"},upload:{deleteTip:"press delete to remove",delete:"Delete",preview:"Preview",continue:"Continue"},slider:{defaultLabel:"slider between {min} and {max}",defaultRangeStartLabel:"pick start value",defaultRangeEndLabel:"pick end value"},table:{emptyText:"No Data",confirmFilter:"Confirm",resetFilter:"Reset",clearFilter:"All",sumText:"Sum"},tree:{emptyText:"No Data"},transfer:{noMatch:"No matching data",noData:"No data",titles:["List 1","List 2"],filterPlaceholder:"Enter keyword",noCheckedFormat:"{total} items",hasCheckedFormat:"{checked}/{total} checked"},image:{error:"FAILED"},pageHeader:{title:"Back"},popconfirm:{confirmButtonText:"Yes",cancelButtonText:"No"}}};const Tr=o=>(e,t)=>Br(e,t,l(o)),Br=(o,e,t)=>St(t,o,o).replace(/\{(\w+)\}/g,(r,a)=>{var s;return`${(s=e==null?void 0:e[a])!=null?s:`{${a}}`}`}),Nr=o=>{const e=D(()=>l(o).name),t=Xo(o)?o:B(o);return{lang:e,locale:t,t:Tr(o)}},Qe=()=>{const o=Ko("locale");return Nr(D(()=>o.value||Ir))},Lr=o=>{if(Xo(o)||xo("[useLockscreen]","You need to pass a ref param to this function"),!Q||Io(document.body,"el-popup-parent--hidden"))return;let e=0,t=!1,r="0",a=0;const s=()=>{It(document.body,"el-popup-parent--hidden"),t&&(document.body.style.paddingRight=r)};J(o,n=>{if(!n){s();return}t=!Io(document.body,"el-popup-parent--hidden"),t&&(r=document.body.style.paddingRight,a=Number.parseInt(ao(document.body,"paddingRight"),10)),e=Sr();const c=document.documentElement.clientHeight<document.body.scrollHeight,i=ao(document.body,"overflowY");e>0&&(c||i==="scroll")&&t&&(document.body.style.paddingRight=`${a+e}px`),At(document.body,"el-popup-parent--hidden")}),Dt(()=>s())},Rr=o=>{if(!o)return{onClick:to,onMousedown:to,onMouseup:to};let e=!1,t=!1;return{onClick:n=>{e&&t&&o(n),e=t=!1},onMousedown:n=>{e=n.target===n.currentTarget},onMouseup:n=>{t=n.target===n.currentTarget}}},Ae=4,Or={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},$r=({move:o,size:e,bar:t})=>({[t.size]:e,transform:`translate${t.axis}(${o}%)`}),zr=X({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),Fr=H({__name:"thumb",props:zr,setup(o){const e=o,t="Thumb",r=Go(nt),a=ae("scrollbar");r||xo(t,"can not inject scrollbar context");const s=B(),n=B(),c=B({}),i=B(!1);let p=!1,u=!1,g=Q?document.onselectstart:null;const d=D(()=>Or[e.vertical?"vertical":"horizontal"]),C=D(()=>$r({size:e.size,move:e.move,bar:d.value})),x=D(()=>s.value[d.value.offset]**2/r.wrapElement[d.value.scrollSize]/e.ratio/n.value[d.value.offset]),w=A=>{var O;if(A.stopPropagation(),A.ctrlKey||[1,2].includes(A.button))return;(O=window.getSelection())==null||O.removeAllRanges(),T(A);const z=A.currentTarget;!z||(c.value[d.value.axis]=z[d.value.offset]-(A[d.value.client]-z.getBoundingClientRect()[d.value.direction]))},S=A=>{if(!n.value||!s.value||!r.wrapElement)return;const O=Math.abs(A.target.getBoundingClientRect()[d.value.direction]-A[d.value.client]),z=n.value[d.value.offset]/2,j=(O-z)*100*x.value/s.value[d.value.offset];r.wrapElement[d.value.scroll]=j*r.wrapElement[d.value.scrollSize]/100},T=A=>{A.stopImmediatePropagation(),p=!0,document.addEventListener("mousemove",$),document.addEventListener("mouseup",P),g=document.onselectstart,document.onselectstart=()=>!1},$=A=>{if(!s.value||!n.value||p===!1)return;const O=c.value[d.value.axis];if(!O)return;const z=(s.value.getBoundingClientRect()[d.value.direction]-A[d.value.client])*-1,j=n.value[d.value.offset]-O,de=(z-j)*100*x.value/s.value[d.value.offset];r.wrapElement[d.value.scroll]=de*r.wrapElement[d.value.scrollSize]/100},P=()=>{p=!1,c.value[d.value.axis]=0,document.removeEventListener("mousemove",$),document.removeEventListener("mouseup",P),h(),u&&(i.value=!1)},M=()=>{u=!1,i.value=!!e.size},v=()=>{u=!0,i.value=p};Jo(()=>{h(),document.removeEventListener("mouseup",P)});const h=()=>{document.onselectstart!==g&&(document.onselectstart=g)};return me(To(r,"scrollbarElement"),"mousemove",M),me(To(r,"scrollbarElement"),"mouseleave",v),(A,O)=>(m(),F(wo,{name:l(a).b("fade"),persisted:""},{default:_(()=>[ze(f("div",{ref_key:"instance",ref:s,class:E([l(a).e("bar"),l(a).is(l(d).key)]),onMousedown:S},[f("div",{ref_key:"thumb",ref:n,class:E(l(a).e("thumb")),style:re(l(C)),onMousedown:w},null,38)],34),[[Fe,A.always||i.value]])]),_:1},8,["name"]))}});var zo=te(Fr,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/thumb.vue"]]);const Mr=X({always:{type:Boolean,default:!0},width:String,height:String,ratioX:{type:Number,default:1},ratioY:{type:Number,default:1}}),Pr=H({__name:"bar",props:Mr,setup(o,{expose:e}){const t=o,r=B(0),a=B(0);return e({handleScroll:n=>{if(n){const c=n.offsetHeight-Ae,i=n.offsetWidth-Ae;a.value=n.scrollTop*100/c*t.ratioY,r.value=n.scrollLeft*100/i*t.ratioX}}}),(n,c)=>(m(),k(Z,null,[b(zo,{move:r.value,ratio:n.ratioX,size:n.width,always:n.always},null,8,["move","ratio","size","always"]),b(zo,{move:a.value,ratio:n.ratioY,size:n.height,vertical:"",always:n.always},null,8,["move","ratio","size","always"])],64))}});var Vr=te(Pr,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/bar.vue"]]);const Hr=X({height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:Boolean,wrapStyle:{type:W([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20}}),qr={scroll:({scrollTop:o,scrollLeft:e})=>[o,e].every(ee)},Yr={name:"ElScrollbar"},Ur=H({...Yr,props:Hr,emits:qr,setup(o,{expose:e,emit:t}){const r=o,a=ae("scrollbar");let s,n;const c=B(),i=B(),p=B(),u=B("0"),g=B("0"),d=B(),C=B(1),x=B(1),w=D(()=>{const v={};return r.height&&(v.height=Ce(r.height)),r.maxHeight&&(v.maxHeight=Ce(r.maxHeight)),[r.wrapStyle,v]}),S=()=>{var v;i.value&&((v=d.value)==null||v.handleScroll(i.value),t("scroll",{scrollTop:i.value.scrollTop,scrollLeft:i.value.scrollLeft}))};function T(v,h){Nt(v)?i.value.scrollTo(v):ee(v)&&ee(h)&&i.value.scrollTo(v,h)}const $=v=>{!ee(v)||(i.value.scrollTop=v)},P=v=>{!ee(v)||(i.value.scrollLeft=v)},M=()=>{if(!i.value)return;const v=i.value.offsetHeight-Ae,h=i.value.offsetWidth-Ae,A=v**2/i.value.scrollHeight,O=h**2/i.value.scrollWidth,z=Math.max(A,r.minSize),j=Math.max(O,r.minSize);C.value=A/(v-A)/(z/(v-z)),x.value=O/(h-O)/(j/(h-j)),g.value=z+Ae<v?`${z}px`:"",u.value=j+Ae<h?`${j}px`:""};return J(()=>r.noresize,v=>{v?(s==null||s(),n==null||n()):({stop:s}=Tt(p,M),n=me("resize",M))},{immediate:!0}),J(()=>[r.maxHeight,r.height],()=>{r.native||xe(()=>{var v;M(),i.value&&((v=d.value)==null||v.handleScroll(i.value))})}),no(nt,Zo({scrollbarElement:c,wrapElement:i})),be(()=>{r.native||xe(()=>M())}),Bt(()=>M()),e({wrap$:i,update:M,scrollTo:T,setScrollTop:$,setScrollLeft:P,handleScroll:S}),(v,h)=>(m(),k("div",{ref_key:"scrollbar$",ref:c,class:E(l(a).b())},[f("div",{ref_key:"wrap$",ref:i,class:E([v.wrapClass,l(a).e("wrap"),{[l(a).em("wrap","hidden-default")]:!v.native}]),style:re(l(w)),onScroll:S},[(m(),F(ke(v.tag),{ref_key:"resize$",ref:p,class:E([l(a).e("view"),v.viewClass]),style:re(v.viewStyle)},{default:_(()=>[q(v.$slots,"default")]),_:3},8,["class","style"]))],38),v.native?N("v-if",!0):(m(),F(Vr,{key:0,ref_key:"barRef",ref:d,height:g.value,width:u.value,always:v.always,"ratio-x":x.value,"ratio-y":C.value},null,8,["height","width","always","ratio-x","ratio-y"]))],2))}});var Wr=te(Ur,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/scrollbar.vue"]]);const eo=we(Wr),jr=X({size:{type:[Number,String],values:jo,default:"",validator:o=>ee(o)},shape:{type:String,values:["circle","square"],default:"circle"},icon:{type:Oe},src:{type:String,default:""},alt:String,srcSet:String,fit:{type:W(String),default:"cover"}}),Kr={error:o=>o instanceof Event},Xr=["src","alt","srcset"],Gr={name:"ElAvatar"},Jr=H({...Gr,props:jr,emits:Kr,setup(o,{emit:e}){const t=o,r=ae("avatar"),a=B(!1),s=D(()=>{const{size:p,icon:u,shape:g}=t,d=[r.b()];return Re(p)&&d.push(r.m(p)),u&&d.push(r.m("icon")),g&&d.push(r.m(g)),d}),n=D(()=>{const{size:p}=t;return ee(p)?r.cssVarBlock({size:Ce(p)||""}):void 0}),c=D(()=>({objectFit:t.fit}));J(()=>t.src,()=>a.value=!1);function i(p){a.value=!0,e("error",p)}return(p,u)=>(m(),k("span",{class:E(l(s)),style:re(l(n))},[(p.src||p.srcSet)&&!a.value?(m(),k("img",{key:0,src:p.src,alt:p.alt,srcset:p.srcSet,style:re(l(c)),onError:i},null,44,Xr)):p.icon?(m(),F(l(U),{key:1},{default:_(()=>[(m(),F(ke(p.icon)))]),_:1})):q(p.$slots,"default",{key:2})],6))}});var Zr=te(Jr,[["__file","/home/runner/work/element-plus/element-plus/packages/components/avatar/src/avatar.vue"]]);const So=we(Zr),Qr=X({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:W([String,Array,Object])},zIndex:{type:W([String,Number])}}),el={click:o=>o instanceof MouseEvent};var ol=H({name:"ElOverlay",props:Qr,emits:el,setup(o,{slots:e,emit:t}){const r=ae("overlay"),a=i=>{t("click",i)},{onClick:s,onMousedown:n,onMouseup:c}=Rr(o.customMaskEvent?void 0:a);return()=>o.mask?b("div",{class:[r.b(),o.overlayClass],style:{zIndex:o.zIndex},onClick:s,onMousedown:n,onMouseup:c},[q(e,"default")],je.STYLE|je.CLASS|je.PROPS,["onClick","onMouseup","onMousedown"]):Lt("div",{class:o.overlayClass,style:{zIndex:o.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[q(e,"default")])}});const tl=ol,rl=X({center:{type:Boolean,default:!1},closeIcon:{type:Oe,default:""},customClass:{type:String,default:""},draggable:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},showClose:{type:Boolean,default:!0},title:{type:String,default:""}}),ll=X({...rl,appendToBody:{type:Boolean,default:!1},beforeClose:{type:W(Function)},destroyOnClose:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:{type:Boolean,required:!0},modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1}}),il={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[$e]:o=>De(o),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},al=(o,e)=>{const r=Me().emit,{nextZIndex:a}=Qo();let s="";const n=Bo(),c=Bo(),i=B(!1),p=B(!1),u=B(!1),g=B(o.zIndex||a());let d,C;const x=Ko("namespace",Rt),w=D(()=>{const K={},he=`--${x.value}-dialog`;return o.fullscreen||(o.top&&(K[`${he}-margin-top`]=o.top),o.width&&(K[`${he}-width`]=Ce(o.width))),K});function S(){r("opened")}function T(){r("closed"),r($e,!1),o.destroyOnClose&&(u.value=!1)}function $(){r("close")}function P(){C==null||C(),d==null||d(),o.openDelay&&o.openDelay>0?{stop:d}=No(()=>A(),o.openDelay):A()}function M(){d==null||d(),C==null||C(),o.closeDelay&&o.closeDelay>0?{stop:C}=No(()=>O(),o.closeDelay):O()}function v(){function K(he){he||(p.value=!0,i.value=!1)}o.beforeClose?o.beforeClose(K):M()}function h(){o.closeOnClickModal&&v()}function A(){!Q||(i.value=!0)}function O(){i.value=!1}function z(){r("openAutoFocus")}function j(){r("closeAutoFocus")}o.lockScroll&&Lr(i);function de(){o.closeOnPressEscape&&v()}return J(()=>o.modelValue,K=>{K?(p.value=!1,P(),u.value=!0,r("open"),g.value=o.zIndex?g.value++:a(),xe(()=>{e.value&&(e.value.scrollTop=0)})):i.value&&M()}),J(()=>o.fullscreen,K=>{!e.value||(K?(s=e.value.style.transform,e.value.style.transform=""):e.value.style.transform=s)}),be(()=>{o.modelValue&&(i.value=!0,u.value=!0,P())}),{afterEnter:S,afterLeave:T,beforeLeave:$,handleClose:v,onModalClick:h,close:M,doClose:O,onOpenAutoFocus:z,onCloseAutoFocus:j,onCloseRequested:de,titleId:n,bodyId:c,closed:p,style:w,rendered:u,visible:i,zIndex:g}},nl=X({...ll,direction:{type:String,default:"rtl",values:["ltr","rtl","ttb","btt"]},size:{type:[String,Number],default:"30%"},withHeader:{type:Boolean,default:!0},modalFade:{type:Boolean,default:!0}}),sl=il,cl=H({name:"ElDrawer",components:{ElOverlay:tl,ElFocusTrap:Ot,ElIcon:U,Close:et},props:nl,emits:sl,setup(o,{slots:e}){ot({scope:"el-drawer",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/drawer.html#slots"},D(()=>!!e.title));const t=B(),r=B(),a=ae("drawer"),{t:s}=Qe(),n=D(()=>o.direction==="rtl"||o.direction==="ltr"),c=D(()=>Ce(o.size));return{...al(o,t),drawerRef:t,focusStartRef:r,isHorizontal:n,drawerSize:c,ns:a,t:s}}}),pl=["aria-label","aria-labelledby","aria-describedby"],dl=["id"],hl=["aria-label"],ul=["id"];function fl(o,e,t,r,a,s){const n=qe("close"),c=qe("el-icon"),i=qe("el-focus-trap"),p=qe("el-overlay");return m(),F(tt,{to:"body",disabled:!o.appendToBody},[b(wo,{name:o.ns.b("fade"),onAfterEnter:o.afterEnter,onAfterLeave:o.afterLeave,onBeforeLeave:o.beforeLeave,persisted:""},{default:_(()=>[ze(b(p,{mask:o.modal,"overlay-class":o.modalClass,"z-index":o.zIndex,onClick:o.onModalClick},{default:_(()=>[b(i,{loop:"",trapped:o.visible,"focus-trap-el":o.drawerRef,"focus-start-el":o.focusStartRef,onReleaseRequested:o.onCloseRequested},{default:_(()=>[f("div",{ref:"drawerRef","aria-modal":"true","aria-label":o.title||void 0,"aria-labelledby":o.title?void 0:o.titleId,"aria-describedby":o.bodyId,class:E([o.ns.b(),o.direction,o.visible&&"open",o.customClass]),style:re(o.isHorizontal?"width: "+o.drawerSize:"height: "+o.drawerSize),role:"dialog",onClick:e[1]||(e[1]=_o(()=>{},["stop"]))},[f("span",{ref:"focusStartRef",class:E(o.ns.e("sr-focus")),tabindex:"-1"},null,2),o.withHeader?(m(),k("header",{key:0,class:E(o.ns.e("header"))},[o.$slots.title?q(o.$slots,"title",{key:1},()=>[N(" DEPRECATED SLOT ")]):q(o.$slots,"header",{key:0,close:o.handleClose,titleId:o.titleId,titleClass:o.ns.e("title")},()=>[o.$slots.title?N("v-if",!0):(m(),k("span",{key:0,id:o.titleId,role:"heading",class:E(o.ns.e("title"))},Y(o.title),11,dl))]),o.showClose?(m(),k("button",{key:2,"aria-label":o.t("el.drawer.close"),class:E(o.ns.e("close-btn")),type:"button",onClick:e[0]||(e[0]=(...u)=>o.handleClose&&o.handleClose(...u))},[b(c,{class:E(o.ns.e("close"))},{default:_(()=>[b(n)]),_:1},8,["class"])],10,hl)):N("v-if",!0)],2)):N("v-if",!0),o.rendered?(m(),k("div",{key:1,id:o.bodyId,class:E(o.ns.e("body"))},[q(o.$slots,"default")],10,ul)):N("v-if",!0),o.$slots.footer?(m(),k("div",{key:2,class:E(o.ns.e("footer"))},[q(o.$slots,"footer")],2)):N("v-if",!0)],14,pl)]),_:3},8,["trapped","focus-trap-el","focus-start-el","onReleaseRequested"])]),_:3},8,["mask","overlay-class","z-index","onClick"]),[[Fe,o.visible]])]),_:3},8,["name","onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"])}var gl=te(cl,[["render",fl],["__file","/home/runner/work/element-plus/element-plus/packages/components/drawer/src/drawer.vue"]]);const ml=we(gl),bl={inheritAttrs:!1};function yl(o,e,t,r,a,s){return q(o.$slots,"default")}var vl=te(bl,[["render",yl],["__file","/home/runner/work/element-plus/element-plus/packages/components/collection/src/collection.vue"]]);const xl={name:"ElCollectionItem",inheritAttrs:!1};function wl(o,e,t,r,a,s){return q(o.$slots,"default")}var _l=te(xl,[["render",wl],["__file","/home/runner/work/element-plus/element-plus/packages/components/collection/src/collection-item.vue"]]);const kl="data-el-collection-item",Cl=o=>{const e=`El${o}Collection`,t=`${e}Item`,r=Symbol(e),a=Symbol(t),s={...vl,name:e,setup(){const c=B(null),i=new Map;no(r,{itemMap:i,getItems:()=>{const u=l(c);if(!u)return[];const g=Array.from(u.querySelectorAll(`[${kl}]`));return[...i.values()].sort((C,x)=>g.indexOf(C.ref)-g.indexOf(x.ref))},collectionRef:c})}},n={..._l,name:t,setup(c,{attrs:i}){const p=B(null),u=Go(r,void 0);no(a,{collectionItemRef:p}),be(()=>{const g=l(p);g&&u.itemMap.set(g,{ref:g,...i})}),Jo(()=>{const g=l(p);u.itemMap.delete(g)})}};return{COLLECTION_INJECTION_KEY:r,COLLECTION_ITEM_INJECTION_KEY:a,ElCollection:s,ElCollectionItem:n}},io=X({trigger:so.trigger,effect:{...ge.effect,default:"light"},type:{type:W(String)},placement:{type:W(String),default:"bottom"},popperOptions:{type:W(Object),default:()=>({})},id:String,size:{type:String,default:""},splitButton:Boolean,hideOnClick:{type:Boolean,default:!0},loop:{type:Boolean,default:!0},showTimeout:{type:Number,default:150},hideTimeout:{type:Number,default:150},tabindex:{type:W([Number,String]),default:0},maxHeight:{type:W([Number,String]),default:""},popperClass:{type:String,default:""},disabled:{type:Boolean,default:!1},role:{type:String,default:"menu"},buttonProps:{type:W(Object)}});X({command:{type:[Object,String,Number],default:()=>({})},disabled:Boolean,divided:Boolean,textValue:String,icon:{type:Oe}});X({onKeydown:{type:W(Function)}});Cl("Dropdown");let El=0;const Sl=H({name:"ImgEmpty",setup(){return{ns:ae("empty"),id:++El}}}),Al={viewBox:"0 0 79 86",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},Dl=["id"],Il=["stop-color"],Tl=["stop-color"],Bl=["id"],Nl=["stop-color"],Ll=["stop-color"],Rl=["id"],Ol={id:"Illustrations",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},$l={id:"B-type",transform:"translate(-1268.000000, -535.000000)"},zl={id:"Group-2",transform:"translate(1268.000000, 535.000000)"},Fl=["fill"],Ml=["fill"],Pl={id:"Group-Copy",transform:"translate(34.500000, 31.500000) scale(-1, 1) rotate(-25.000000) translate(-34.500000, -31.500000) translate(7.000000, 10.000000)"},Vl=["fill"],Hl=["fill"],ql=["fill"],Yl=["fill"],Ul=["fill"],Wl={id:"Rectangle-Copy-17",transform:"translate(53.000000, 45.000000)"},jl=["fill","xlink:href"],Kl=["fill","mask"],Xl=["fill"];function Gl(o,e,t,r,a,s){return m(),k("svg",Al,[f("defs",null,[f("linearGradient",{id:`linearGradient-1-${o.id}`,x1:"38.8503086%",y1:"0%",x2:"61.1496914%",y2:"100%"},[f("stop",{"stop-color":`var(${o.ns.cssVarBlockName("fill-color-1")})`,offset:"0%"},null,8,Il),f("stop",{"stop-color":`var(${o.ns.cssVarBlockName("fill-color-4")})`,offset:"100%"},null,8,Tl)],8,Dl),f("linearGradient",{id:`linearGradient-2-${o.id}`,x1:"0%",y1:"9.5%",x2:"100%",y2:"90.5%"},[f("stop",{"stop-color":`var(${o.ns.cssVarBlockName("fill-color-1")})`,offset:"0%"},null,8,Nl),f("stop",{"stop-color":`var(${o.ns.cssVarBlockName("fill-color-6")})`,offset:"100%"},null,8,Ll)],8,Bl),f("rect",{id:`path-3-${o.id}`,x:"0",y:"0",width:"17",height:"36"},null,8,Rl)]),f("g",Ol,[f("g",$l,[f("g",zl,[f("path",{id:"Oval-Copy-2",d:"M39.5,86 C61.3152476,86 79,83.9106622 79,81.3333333 C79,78.7560045 57.3152476,78 35.5,78 C13.6847524,78 0,78.7560045 0,81.3333333 C0,83.9106622 17.6847524,86 39.5,86 Z",fill:`var(${o.ns.cssVarBlockName("fill-color-3")})`},null,8,Fl),f("polygon",{id:"Rectangle-Copy-14",fill:`var(${o.ns.cssVarBlockName("fill-color-7")})`,transform:"translate(27.500000, 51.500000) scale(1, -1) translate(-27.500000, -51.500000) ",points:"13 58 53 58 42 45 2 45"},null,8,Ml),f("g",Pl,[f("polygon",{id:"Rectangle-Copy-10",fill:`var(${o.ns.cssVarBlockName("fill-color-7")})`,transform:"translate(11.500000, 5.000000) scale(1, -1) translate(-11.500000, -5.000000) ",points:"2.84078316e-14 3 18 3 23 7 5 7"},null,8,Vl),f("polygon",{id:"Rectangle-Copy-11",fill:`var(${o.ns.cssVarBlockName("fill-color-5")})`,points:"-3.69149156e-15 7 38 7 38 43 -3.69149156e-15 43"},null,8,Hl),f("rect",{id:"Rectangle-Copy-12",fill:`url(#linearGradient-1-${o.id})`,transform:"translate(46.500000, 25.000000) scale(-1, 1) translate(-46.500000, -25.000000) ",x:"38",y:"7",width:"17",height:"36"},null,8,ql),f("polygon",{id:"Rectangle-Copy-13",fill:`var(${o.ns.cssVarBlockName("fill-color-2")})`,transform:"translate(39.500000, 3.500000) scale(-1, 1) translate(-39.500000, -3.500000) ",points:"24 7 41 7 55 -3.63806207e-12 38 -3.63806207e-12"},null,8,Yl)]),f("rect",{id:"Rectangle-Copy-15",fill:`url(#linearGradient-2-${o.id})`,x:"13",y:"45",width:"40",height:"36"},null,8,Ul),f("g",Wl,[f("use",{id:"Mask",fill:`var(${o.ns.cssVarBlockName("fill-color-8")})`,transform:"translate(8.500000, 18.000000) scale(-1, 1) translate(-8.500000, -18.000000) ","xlink:href":`#path-3-${o.id}`},null,8,jl),f("polygon",{id:"Rectangle-Copy",fill:`var(${o.ns.cssVarBlockName("fill-color-9")})`,mask:`url(#mask-4-${o.id})`,transform:"translate(12.000000, 9.000000) scale(-1, 1) translate(-12.000000, -9.000000) ",points:"7 0 24 0 20 18 7 16.5"},null,8,Kl)]),f("polygon",{id:"Rectangle-Copy-18",fill:`var(${o.ns.cssVarBlockName("fill-color-2")})`,transform:"translate(66.000000, 51.500000) scale(-1, 1) translate(-66.000000, -51.500000) ",points:"62 45 79 45 70 58 53 58"},null,8,Xl)])])])])}var Jl=te(Sl,[["render",Gl],["__file","/home/runner/work/element-plus/element-plus/packages/components/empty/src/img-empty.vue"]]);const Zl={image:{type:String,default:""},imageSize:Number,description:{type:String,default:""}},Ql=["src"],ei={key:1},oi={name:"ElEmpty"},ti=H({...oi,props:Zl,setup(o){const e=o,{t}=Qe(),r=ae("empty"),a=D(()=>e.description||t("el.table.emptyText")),s=D(()=>({width:e.imageSize?`${e.imageSize}px`:""}));return(n,c)=>(m(),k("div",{class:E(l(r).b())},[f("div",{class:E(l(r).e("image")),style:re(l(s))},[n.image?(m(),k("img",{key:0,src:n.image,ondragstart:"return false"},null,8,Ql)):q(n.$slots,"image",{key:1},()=>[b(Jl)])],6),f("div",{class:E(l(r).e("description"))},[n.$slots.description?q(n.$slots,"description",{key:0}):(m(),k("p",ei,Y(l(a)),1))],2),n.$slots.default?(m(),k("div",{key:0,class:E(l(r).e("bottom"))},[q(n.$slots,"default")],2)):N("v-if",!0)],2))}});var ri=te(ti,[["__file","/home/runner/work/element-plus/element-plus/packages/components/empty/src/empty.vue"]]);const li=we(ri),ii=X({urlList:{type:W(Array),default:()=>rt([])},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:{type:Boolean,default:!1},teleported:{type:Boolean,default:!1},closeOnPressEscape:{type:Boolean,default:!0}}),ai={close:()=>!0,switch:o=>ee(o)},ni=["src"],si={name:"ElImageViewer"},ci=H({...si,props:ii,emits:ai,setup(o,{emit:e}){const t=o,r={CONTAIN:{name:"contain",icon:Lo($t)},ORIGINAL:{name:"original",icon:Lo(zt)}},a=Dr()?"DOMMouseScroll":"mousewheel",{t:s}=Qe(),n=ae("image-viewer"),{nextZIndex:c}=Qo(),i=B(),p=B([]),u=Ft(),g=B(!0),d=B(t.initialIndex),C=Mt(r.CONTAIN),x=B({scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),w=D(()=>{const{urlList:I}=t;return I.length<=1}),S=D(()=>d.value===0),T=D(()=>d.value===t.urlList.length-1),$=D(()=>t.urlList[d.value]),P=D(()=>{const{scale:I,deg:y,offsetX:R,offsetY:G,enableTransition:ue}=x.value;let le=R/I,fe=G/I;switch(y%360){case 90:case-270:[le,fe]=[fe,-le];break;case 180:case-180:[le,fe]=[-le,-fe];break;case 270:case-90:[le,fe]=[-fe,le];break}const Ee={transform:`scale(${I}) rotate(${y}deg) translate(${le}px, ${fe}px)`,transition:ue?"transform .3s":""};return C.value.name===r.CONTAIN.name&&(Ee.maxWidth=Ee.maxHeight="100%"),Ee}),M=D(()=>ee(t.zIndex)?t.zIndex:c());function v(){A(),e("close")}function h(){const I=lo(R=>{switch(R.code){case Se.esc:t.closeOnPressEscape&&v();break;case Se.space:K();break;case Se.left:he();break;case Se.up:ne("zoomIn");break;case Se.right:He();break;case Se.down:ne("zoomOut");break}}),y=lo(R=>{(R.wheelDelta?R.wheelDelta:-R.detail)>0?ne("zoomIn",{zoomRate:1.2,enableTransition:!1}):ne("zoomOut",{zoomRate:1.2,enableTransition:!1})});u.run(()=>{me(document,"keydown",I),me(document,a,y)})}function A(){u.stop()}function O(){g.value=!1}function z(I){g.value=!1,I.target.alt=s("el.image.error")}function j(I){if(g.value||I.button!==0||!i.value)return;x.value.enableTransition=!1;const{offsetX:y,offsetY:R}=x.value,G=I.pageX,ue=I.pageY,le=lo(Ee=>{x.value={...x.value,offsetX:y+Ee.pageX-G,offsetY:R+Ee.pageY-ue}}),fe=me(document,"mousemove",le);me(document,"mouseup",()=>{fe()}),I.preventDefault()}function de(){x.value={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function K(){if(g.value)return;const I=Wt(r),y=Object.values(r),R=C.value.name,ue=(y.findIndex(le=>le.name===R)+1)%I.length;C.value=r[I[ue]],de()}function he(){if(S.value&&!t.infinite)return;const I=t.urlList.length;d.value=(d.value-1+I)%I}function He(){if(T.value&&!t.infinite)return;const I=t.urlList.length;d.value=(d.value+1)%I}function ne(I,y={}){if(g.value)return;const{zoomRate:R,rotateDeg:G,enableTransition:ue}={zoomRate:1.4,rotateDeg:90,enableTransition:!0,...y};switch(I){case"zoomOut":x.value.scale>.2&&(x.value.scale=Number.parseFloat((x.value.scale/R).toFixed(3)));break;case"zoomIn":x.value.scale<7&&(x.value.scale=Number.parseFloat((x.value.scale*R).toFixed(3)));break;case"clockwise":x.value.deg+=G;break;case"anticlockwise":x.value.deg-=G;break}x.value.enableTransition=ue}return J($,()=>{xe(()=>{const I=p.value[0];I!=null&&I.complete||(g.value=!0)})}),J(d,I=>{de(),e("switch",I)}),be(()=>{var I,y;h(),(y=(I=i.value)==null?void 0:I.focus)==null||y.call(I)}),(I,y)=>(m(),F(tt,{to:"body",disabled:!I.teleported},[b(wo,{name:"viewer-fade",appear:""},{default:_(()=>[f("div",{ref_key:"wrapper",ref:i,tabindex:-1,class:E(l(n).e("wrapper")),style:re({zIndex:l(M)})},[f("div",{class:E(l(n).e("mask")),onClick:y[0]||(y[0]=_o(R=>I.hideOnClickModal&&v(),["self"]))},null,2),N(" CLOSE "),f("span",{class:E([l(n).e("btn"),l(n).e("close")]),onClick:v},[b(l(U),null,{default:_(()=>[b(l(et))]),_:1})],2),N(" ARROW "),l(w)?N("v-if",!0):(m(),k(Z,{key:0},[f("span",{class:E([l(n).e("btn"),l(n).e("prev"),l(n).is("disabled",!I.infinite&&l(S))]),onClick:he},[b(l(U),null,{default:_(()=>[b(l(Pt))]),_:1})],2),f("span",{class:E([l(n).e("btn"),l(n).e("next"),l(n).is("disabled",!I.infinite&&l(T))]),onClick:He},[b(l(U),null,{default:_(()=>[b(l(Vt))]),_:1})],2)],64)),N(" ACTIONS "),f("div",{class:E([l(n).e("btn"),l(n).e("actions")])},[f("div",{class:E(l(n).e("actions__inner"))},[b(l(U),{onClick:y[1]||(y[1]=R=>ne("zoomOut"))},{default:_(()=>[b(l(Ht))]),_:1}),b(l(U),{onClick:y[2]||(y[2]=R=>ne("zoomIn"))},{default:_(()=>[b(l(qt))]),_:1}),f("i",{class:E(l(n).e("actions__divider"))},null,2),b(l(U),{onClick:K},{default:_(()=>[(m(),F(ke(l(C).icon)))]),_:1}),f("i",{class:E(l(n).e("actions__divider"))},null,2),b(l(U),{onClick:y[3]||(y[3]=R=>ne("anticlockwise"))},{default:_(()=>[b(l(Yt))]),_:1}),b(l(U),{onClick:y[4]||(y[4]=R=>ne("clockwise"))},{default:_(()=>[b(l(Ut))]),_:1})],2)],2),N(" CANVAS "),f("div",{class:E(l(n).e("canvas"))},[(m(!0),k(Z,null,Pe(I.urlList,(R,G)=>ze((m(),k("img",{ref_for:!0,ref:ue=>p.value[G]=ue,key:R,src:R,style:re(l(P)),class:E(l(n).e("img")),onLoad:O,onError:z,onMousedown:j},null,46,ni)),[[Fe,G===d.value]])),128))],2),q(I.$slots,"default")],6)]),_:3})],8,["disabled"]))}});var pi=te(ci,[["__file","/home/runner/work/element-plus/element-plus/packages/components/image-viewer/src/image-viewer.vue"]]);const di=we(pi),hi=X({hideOnClickModal:{type:Boolean,default:!1},src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:{type:Boolean,default:!1},scrollContainer:{type:W([String,Object])},previewSrcList:{type:W(Array),default:()=>rt([])},previewTeleported:{type:Boolean,default:!1},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0}}),ui={load:o=>o instanceof Event,error:o=>o instanceof Event,switch:o=>ee(o),close:()=>!0},fi=["src","loading"],gi={key:0},mi={name:"ElImage",inheritAttrs:!1},bi=H({...mi,props:hi,emits:ui,setup(o,{emit:e}){const t=o;let r="";const{t:a}=Qe(),s=ae("image"),n=jt(),c=Kt(),i=B(),p=B(!1),u=B(!0),g=B(!1),d=B(),C=B(),x=Q&&"loading"in HTMLImageElement.prototype;let w,S;const T=D(()=>n.style),$=D(()=>{const{fit:y}=t;return Q&&y?{objectFit:y}:{}}),P=D(()=>{const{previewSrcList:y}=t;return Array.isArray(y)&&y.length>0}),M=D(()=>{const{previewSrcList:y,initialIndex:R}=t;let G=R;return R>y.length-1&&(G=0),G}),v=D(()=>t.loading==="eager"?!1:!x&&t.loading==="lazy"||t.lazy),h=()=>{!Q||(u.value=!0,p.value=!1,i.value=t.src)};function A(y){u.value=!1,p.value=!1,e("load",y)}function O(y){u.value=!1,p.value=!0,e("error",y)}function z(){kr(d.value,C.value)&&(h(),K())}const j=Gt(z,200);async function de(){var y;if(!Q)return;await xe();const{scrollContainer:R}=t;Xt(R)?C.value=R:Re(R)&&R!==""?C.value=(y=document.querySelector(R))!=null?y:void 0:d.value&&(C.value=Er(d.value)),C.value&&(w=me(C,"scroll",j),setTimeout(()=>z(),100))}function K(){!Q||!C.value||!j||(w==null||w(),C.value=void 0)}function he(y){if(!!y.ctrlKey){if(y.deltaY<0)return y.preventDefault(),!1;if(y.deltaY>0)return y.preventDefault(),!1}}function He(){!P.value||(S=me("wheel",he,{passive:!1}),r=document.body.style.overflow,document.body.style.overflow="hidden",g.value=!0)}function ne(){S==null||S(),document.body.style.overflow=r,g.value=!1,e("close")}function I(y){e("switch",y)}return J(()=>t.src,()=>{v.value?(u.value=!0,p.value=!1,K(),de()):h()}),be(()=>{v.value?de():h()}),(y,R)=>(m(),k("div",{ref_key:"container",ref:d,class:E([l(s).b(),y.$attrs.class]),style:re(l(T))},[i.value!==void 0&&!p.value?(m(),k("img",lt({key:0},l(c),{src:i.value,loading:y.loading,style:l($),class:[l(s).e("inner"),l(P)&&l(s).e("preview"),u.value&&l(s).is("loading")],onClick:He,onLoad:A,onError:O}),null,16,fi)):N("v-if",!0),u.value||p.value?(m(),k("div",{key:1,class:E(l(s).e("wrapper"))},[u.value?q(y.$slots,"placeholder",{key:0},()=>[f("div",{class:E(l(s).e("placeholder"))},null,2)]):p.value?q(y.$slots,"error",{key:1},()=>[f("div",{class:E(l(s).e("error"))},Y(l(a)("el.image.error")),3)]):N("v-if",!0)],2)):N("v-if",!0),l(P)?(m(),k(Z,{key:2},[g.value?(m(),F(l(di),{key:0,"z-index":y.zIndex,"initial-index":l(M),infinite:y.infinite,"url-list":y.previewSrcList,"hide-on-click-modal":y.hideOnClickModal,teleported:y.previewTeleported,"close-on-press-escape":y.closeOnPressEscape,onClose:ne,onSwitch:I},{default:_(()=>[y.$slots.viewer?(m(),k("div",gi,[q(y.$slots,"viewer")])):N("v-if",!0)]),_:3},8,["z-index","initial-index","infinite","url-list","hide-on-click-modal","teleported","close-on-press-escape"])):N("v-if",!0)],64)):N("v-if",!0)],6))}});var yi=te(bi,[["__file","/home/runner/work/element-plus/element-plus/packages/components/image/src/image.vue"]]);const vi=we(yi),xi=X({trigger:so.trigger,placement:io.placement,disabled:so.disabled,visible:ge.visible,transition:ge.transition,popperOptions:io.popperOptions,tabindex:io.tabindex,content:ge.content,popperStyle:ge.popperStyle,popperClass:ge.popperClass,enterable:{...ge.enterable,default:!0},effect:{...ge.effect,default:"light"},teleported:ge.teleported,title:String,width:{type:[String,Number],default:150},offset:{type:Number,default:void 0},showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0},showArrow:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0}}),wi={"update:visible":o=>De(o),"before-enter":()=>!0,"before-leave":()=>!0,"after-enter":()=>!0,"after-leave":()=>!0},_i={name:"ElPopover"},ki=H({..._i,props:xi,emits:wi,setup(o,{expose:e,emit:t}){const r=o,a=ae("popover"),s=B(),n=D(()=>{var w;return(w=l(s))==null?void 0:w.popperRef}),c=D(()=>[{width:Ce(r.width)},r.popperStyle]),i=D(()=>[a.b(),r.popperClass,{[a.m("plain")]:!!r.content}]),p=D(()=>r.transition==="el-fade-in-linear"),u=()=>{var w;(w=s.value)==null||w.hide()},g=()=>{t("before-enter")},d=()=>{t("before-leave")},C=()=>{t("after-enter")},x=()=>{t("update:visible",!1),t("after-leave")};return e({popperRef:n,hide:u}),(w,S)=>(m(),F(l(ko),lt({ref_key:"tooltipRef",ref:s},w.$attrs,{trigger:w.trigger,placement:w.placement,disabled:w.disabled,visible:w.visible,transition:w.transition,"popper-options":w.popperOptions,tabindex:w.tabindex,content:w.content,offset:w.offset,"show-after":w.showAfter,"hide-after":w.hideAfter,"auto-close":w.autoClose,"show-arrow":w.showArrow,"aria-label":w.title,effect:w.effect,enterable:w.enterable,"popper-class":l(i),"popper-style":l(c),teleported:w.teleported,persistent:w.persistent,"gpu-acceleration":l(p),onBeforeShow:g,onBeforeHide:d,onShow:C,onHide:x}),{content:_(()=>[w.title?(m(),k("div",{key:0,class:E(l(a).e("title")),role:"title"},Y(w.title),3)):N("v-if",!0),q(w.$slots,"default",{},()=>[oe(Y(w.content),1)])]),default:_(()=>[w.$slots.reference?q(w.$slots,"reference",{key:0}):N("v-if",!0)]),_:3},16,["trigger","placement","disabled","visible","transition","popper-options","tabindex","content","offset","show-after","hide-after","auto-close","show-arrow","aria-label","effect","enterable","popper-class","popper-style","teleported","persistent","gpu-acceleration"]))}});var Ci=te(ki,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popover/src/popover.vue"]]);const Fo=(o,e)=>{const t=e.arg||e.value,r=t==null?void 0:t.popperRef;r&&(r.triggerRef=o)};var Ei={mounted(o,e){Fo(o,e)},updated(o,e){Fo(o,e)}};const Si="popover",Ai=Jt(Ei,Si),Di=we(Ci,{directive:Ai}),Ii=X({modelValue:{type:[Boolean,String,Number],default:!1},value:{type:[Boolean,String,Number],default:!1},disabled:{type:Boolean,default:!1},width:{type:[String,Number],default:""},inlinePrompt:{type:Boolean,default:!1},activeIcon:{type:Oe,default:""},inactiveIcon:{type:Oe,default:""},activeText:{type:String,default:""},inactiveText:{type:String,default:""},activeColor:{type:String,default:""},inactiveColor:{type:String,default:""},borderColor:{type:String,default:""},activeValue:{type:[Boolean,String,Number],default:!0},inactiveValue:{type:[Boolean,String,Number],default:!1},name:{type:String,default:""},validateEvent:{type:Boolean,default:!0},id:String,loading:{type:Boolean,default:!1},beforeChange:{type:W(Function)},size:{type:String,validator:Ar},tabindex:{type:[String,Number]}}),Ti={[$e]:o=>De(o)||Re(o)||ee(o),[co]:o=>De(o)||Re(o)||ee(o),[po]:o=>De(o)||Re(o)||ee(o)},Bi=["onClick"],Ni=["id","aria-checked","aria-disabled","name","true-value","false-value","disabled","tabindex","onKeydown"],Li=["aria-hidden"],Ri=["aria-hidden"],Oi=["aria-hidden"],$i=["aria-hidden"],zi={name:"ElSwitch"},Fi=H({...zi,props:Ii,emits:Ti,setup(o,{expose:e,emit:t}){const r=o,a="ElSwitch",s=Me(),{formItem:n}=Zt(),c=Qt(),i=ae("switch");ot({from:'"value"',replacement:'"model-value" or "v-model"',scope:a,version:"2.3.0",ref:"https://element-plus.org/en-US/component/switch.html#attributes",type:"Attribute"},D(()=>{var h;return!!((h=s.vnode.props)!=null&&h.value)}));const{inputId:p}=er(r,{formItemContext:n}),u=or(D(()=>r.loading)),g=B(r.modelValue!==!1),d=B(),C=B(),x=D(()=>[i.b(),i.m(c.value),i.is("disabled",u.value),i.is("checked",T.value)]),w=D(()=>({width:Ce(r.width)}));J(()=>r.modelValue,()=>{g.value=!0}),J(()=>r.value,()=>{g.value=!1});const S=D(()=>g.value?r.modelValue:r.value),T=D(()=>S.value===r.activeValue);[r.activeValue,r.inactiveValue].includes(S.value)||(t($e,r.inactiveValue),t(co,r.inactiveValue),t(po,r.inactiveValue)),J(T,h=>{var A;d.value.checked=h,r.validateEvent&&((A=n==null?void 0:n.validate)==null||A.call(n,"change").catch(O=>tr()))});const $=()=>{const h=T.value?r.inactiveValue:r.activeValue;t($e,h),t(co,h),t(po,h),xe(()=>{d.value.checked=T.value})},P=()=>{if(u.value)return;const{beforeChange:h}=r;if(!h){$();return}const A=h();[Ro(A),De(A)].includes(!0)||xo(a,"beforeChange must return type `Promise<boolean>` or `boolean`"),Ro(A)?A.then(z=>{z&&$()}).catch(z=>{}):A&&$()},M=D(()=>i.cssVarBlock({...r.activeColor?{"on-color":r.activeColor}:null,...r.inactiveColor?{"off-color":r.inactiveColor}:null,...r.borderColor?{"border-color":r.borderColor}:null})),v=()=>{var h,A;(A=(h=d.value)==null?void 0:h.focus)==null||A.call(h)};return be(()=>{d.value.checked=T.value}),e({focus:v}),(h,A)=>(m(),k("div",{class:E(l(x)),style:re(l(M)),onClick:_o(P,["prevent"])},[f("input",{id:l(p),ref_key:"input",ref:d,class:E(l(i).e("input")),type:"checkbox",role:"switch","aria-checked":l(T),"aria-disabled":l(u),name:h.name,"true-value":h.activeValue,"false-value":h.inactiveValue,disabled:l(u),tabindex:h.tabindex,onChange:$,onKeydown:it(P,["enter"])},null,42,Ni),!h.inlinePrompt&&(h.inactiveIcon||h.inactiveText)?(m(),k("span",{key:0,class:E([l(i).e("label"),l(i).em("label","left"),l(i).is("active",!l(T))])},[h.inactiveIcon?(m(),F(l(U),{key:0},{default:_(()=>[(m(),F(ke(h.inactiveIcon)))]),_:1})):N("v-if",!0),!h.inactiveIcon&&h.inactiveText?(m(),k("span",{key:1,"aria-hidden":l(T)},Y(h.inactiveText),9,Li)):N("v-if",!0)],2)):N("v-if",!0),f("span",{ref_key:"core",ref:C,class:E(l(i).e("core")),style:re(l(w))},[h.inlinePrompt?(m(),k("div",{key:0,class:E(l(i).e("inner"))},[h.activeIcon||h.inactiveIcon?(m(),k(Z,{key:0},[h.activeIcon?(m(),F(l(U),{key:0,class:E([l(i).is("icon"),l(T)?l(i).is("show"):l(i).is("hide")])},{default:_(()=>[(m(),F(ke(h.activeIcon)))]),_:1},8,["class"])):N("v-if",!0),h.inactiveIcon?(m(),F(l(U),{key:1,class:E([l(i).is("icon"),l(T)?l(i).is("hide"):l(i).is("show")])},{default:_(()=>[(m(),F(ke(h.inactiveIcon)))]),_:1},8,["class"])):N("v-if",!0)],64)):h.activeText||h.inactiveIcon?(m(),k(Z,{key:1},[h.activeText?(m(),k("span",{key:0,class:E([l(i).is("text"),l(T)?l(i).is("show"):l(i).is("hide")]),"aria-hidden":!l(T)},Y(h.activeText.substring(0,3)),11,Ri)):N("v-if",!0),h.inactiveText?(m(),k("span",{key:1,class:E([l(i).is("text"),l(T)?l(i).is("hide"):l(i).is("show")]),"aria-hidden":l(T)},Y(h.inactiveText.substring(0,3)),11,Oi)):N("v-if",!0)],64)):N("v-if",!0)],2)):N("v-if",!0),f("div",{class:E(l(i).e("action"))},[h.loading?(m(),F(l(U),{key:0,class:E(l(i).is("loading"))},{default:_(()=>[b(l(rr))]),_:1},8,["class"])):N("v-if",!0)],2)],6),!h.inlinePrompt&&(h.activeIcon||h.activeText)?(m(),k("span",{key:1,class:E([l(i).e("label"),l(i).em("label","right"),l(i).is("active",l(T))])},[h.activeIcon?(m(),F(l(U),{key:0},{default:_(()=>[(m(),F(ke(h.activeIcon)))]),_:1})):N("v-if",!0),!h.activeIcon&&h.activeText?(m(),k("span",{key:1,"aria-hidden":!l(T)},Y(h.activeText),9,$i)):N("v-if",!0)],2)):N("v-if",!0)],14,Bi))}});var Mi=te(Fi,[["__file","/home/runner/work/element-plus/element-plus/packages/components/switch/src/switch.vue"]]);const Pi=we(Mi);class fo{constructor(e,t,r,a,s,n,c,i,p){se(this,"sendId");se(this,"recipientId");se(this,"content");se(this,"type");se(this,"status");se(this,"timestamp");se(this,"createAt");se(this,"isRead");se(this,"avatar");this.sendId=e,this.recipientId=t,this.content=r,this.type=a,this.status=s,this.timestamp=n,this.createAt=c,this.isRead=i,this.avatar=p}}const Vi={class:"edit-box"},Hi={class:"text-left"},qi=["id"],Yi={class:"text-right mt-10px"},Ui=oe("\u53D1 \u9001"),Wi=H({__name:"ChatEditor",props:{value:null,id:null,height:null},setup(o){const e=_e(),{proxy:t}=Me();Zo({editor:{},data:""}),J(()=>t.value,(i,p)=>{t.value!==e.editorData&&(e.editorData=t.value,e.editor&&e.editor.txt&&e.editor.txt.html(e.editorData))},{immediate:!0,deep:!0}),be(()=>{e.initEditor(),xe(()=>{e.chatEditor=t.$refs.chatEditor})});function r(){t.$refs.upload.files[0]}function a(){var i=navigator.userAgent,p=!1;if(i.indexOf("Edge")>-1)return"Edge";if(i.indexOf(".NET")>-1)return"IE";if(i.indexOf("Opera")>-1||i.indexOf("OPR")>-1)return p=!0,"Opera";if(i.indexOf("Firefox")>-1)return"FF";if(i.indexOf("Chrome")>-1)return"Chrome";if(i.indexOf("Safari")>-1)return"Safari";if(i.indexOf("compatible")>-1&&i.indexOf("MSIE")>-1&&!p)return"IE"}function s(i){if(i.ctrlKey&&i.keyCode===13){let p=e.editor.txt.html().trim().length;a()=="IE"||a()=="Edge"?p==0?e.editor.cmd.do("insertHTML","<div></div><div></div>"):e.editor.cmd.do("insertHTML","<div></div>"):a()=="FF"?p==0?e.editor.cmd.do("insertHTML","<br/><br/><br/><br/>"):e.editor.cmd.do("insertHTML","<br/><br/>"):p==0?e.editor.cmd.do("insertHTML","<div><br/></div><div><br/></div>"):e.editor.cmd.do("insertHTML","<div><br/></div>")}else if(i.keyCode===13)return i.preventDefault(),n(),!1}function n(){let i=e.editor.txt.html().trim();if(i.length){let p=+new Date+"",u=new fo(e.userInfo.id,e.recipient.id,i,0,0,p,"",!1,e.userInfo.avatar);if(e.socket==null){ho.warning("socket\u4E0D\u5B58\u5728");return}e.sendLocal(u),e.sendInfos(u)}else return;c()}function c(){try{return e.editor.txt.clear()}catch(i){console.warn(i)}}return(i,p)=>{const u=eo,g=Ze,d=ko;return m(),k("div",Vi,[b(u,{height:"100px",class:"w-100% rounded-8px"},{default:_(()=>[f("div",Hi,[f("div",{ref:"chatEditor",id:o.id,onKeydown:p[0]||(p[0]=it(C=>s(C),["enter"]))},null,40,qi),f("input",{ref:"upload",class:"opacity-0 hidden",onChange:r,type:"file"},null,544)])]),_:1}),f("div",Yi,[b(d,{placement:"bottom",content:"\u6309enter\u952E\u53D1\u9001\uFF0C\u6309ctrl+enter\u952E\u6362\u884C"},{default:_(()=>[b(g,{type:"primary",onClick:n},{default:_(()=>[Ui]),_:1})]),_:1})])])}}});var ji=Ie(Wi,[["__scopeId","data-v-881fbf6a"]]);var Ki="/assets/emoji.ff71b93a.svg";function Xi(o){return lr({url:"/api/uploadFile",method:"post",data:o})}const Gi={class:"px-20px"},Ji=f("div",{class:"text-20px cursor-pointer dark:filter-invert-100"},[f("img",{width:"24",height:"24",class:"block",src:Ki})],-1),Zi={class:"m0 p0 pr-2px flex flex-wrap"},Qi=["title"],ea=["src","onClick"],oa={class:"ml-10px text-20px i-ep-picture-rounded !cursor-pointer"},ta={class:"ml-10px text-20px i-ep-video-camera !cursor-pointer"},ra=H({__name:"ChatFoot",setup(o){const{proxy:e}=Me(),t=_e(),r=B(null);function a(i){let p=`<img src='${i}' class='emo-image' />`;t.editor.cmd.do("insertHTML",p)}async function s(i){const p=i.target.files[0];if(p!=null){if(!/image\/\w+/.test(p.type))return alert("\u8BF7\u9009\u62E9\u56FE\u7247\u6587\u4EF6!");if(p.size>1024*1024*10)return alert("\u4E0A\u4F20\u56FE\u7247\u4E0D\u80FD\u8D85\u8FC710M!");{console.log(p);const u=URL.createObjectURL(p);let g=new fo(t.userInfo.id,t.recipient.id,u,1,0,+new Date,"",!1,t.userInfo.avatar);t.sendLocal(g);const d=await c(i.target.files[0]);d&&(g.content=d.url,t.sendInfos(g)),e.$refs.referenceUpload.value=null}}}async function n(i){const p=i.target.files,u=new Blob([p[0]],{type:"video/mp4"}),g=URL.createObjectURL(u);let d=new fo(t.userInfo.id,t.recipient.id,g,2,0,+new Date,"",!1,t.userInfo.avatar);t.sendLocal(d);const C=await c(i.target.files[0]);C&&(d.content=C.url,t.sendInfos(d)),e.$refs.referenceUploadVideo.value=null}function c(i){return new Promise((p,u)=>{const g=new FormData;g.append("file",i),Xi(g).then(d=>{d.code===200&&p(d.data),p(void 0)}).catch(()=>{p(void 0)})})}return(i,p)=>{const u=eo,g=Di,d=Ve,C=ji;return m(),k("footer",Gi,[b(d,{type:"flex",class:"mb-10px"},{default:_(()=>[b(g,{placement:"top","popper-class":"chat-icon-popover",trigger:"click"},{reference:_(()=>[Ji]),default:_(()=>[b(u,{class:"emoji",height:"150px"},{default:_(()=>[f("ul",Zi,[(m(!0),k(Z,null,Pe(l(t).emojiList,x=>(m(),k("li",{key:x.title,class:"p-5px list-none hover:animate-heart-beat animate-count-animated animate-duration-1s cursor-pointer",title:x.title},[f("img",{width:"30",height:"30",src:x.icon,onClick:w=>a(x.icon)},null,8,ea)],8,Qi))),128))])]),_:1})]),_:1}),f("div",oa,[f("input",{ref:"referenceUpload",class:"opacity-0",name:"customerService",type:"file",value:"",accept:"image/*",onChange:s},null,544)]),f("div",ta,[f("input",{ref:"referenceUploadVideo",class:"opacity-0",name:"customerService",type:"file",value:"",accept:"video/*",onChange:n},null,544)])]),_:1}),b(C,{modelValue:l(t).sendInfo,"onUpdate:modelValue":p[0]||(p[0]=x=>l(t).sendInfo=x),ref_key:"editor",ref:r,id:"chatEditor",height:135,class:"answer-editor",placeholder:"\u8BF7\u8F93\u5165\u804A\u5929"},null,8,["modelValue"])])}}});const la={class:"text-left px-20px h-35px"},ia={class:"fw-600"},aa=H({__name:"ChatHead",setup(o){const e=_e();return(t,r)=>{var a;return m(),k("header",la,[f("span",ia,Y((a=l(e).recipient)==null?void 0:a.email),1)])}}});function na(o){(""+o).length===10?o=parseInt(o)*1e3:o=+o;const e=+new Date(o),r=(Date.now()-e)/1e3;if(r<30)return"\u521A\u521A";if(r<3600)return Math.ceil(r/60)+"\u5206\u949F\u524D";if(r<3600*24)return Math.ceil(r/3600)+"\u5C0F\u65F6\u524D";if(r<3600*24*2)return"1\u5929\u524D"}const Te=o=>(Co("data-v-38e580f2"),o=o(),Eo(),o),sa={class:"lg:w-73% w-100%"},ca={class:"px-20px h-500px"},pa={class:"p-20px"},da={class:"text-12px my-20px text-center",style:{color:"var(--ep-color-primary-light-3)"}},ha=["innerHTML"],ua={key:1,width:"300",height:"180",controls:""},fa=["src"],ga=oe(" \u60A8\u7684\u6D4F\u89C8\u5668\u4E0D\u652F\u6301 HTML5 video \u6807\u7B7E\u3002 "),ma=Te(()=>f("i",{i:"ep-loading",style:{color:"var(--ep-color-primary-light-3)"}},null,-1)),ba=oe(" user "),ya={class:"text-left mt-40px"},va=Te(()=>f("span",null,"\u90AE \u7BB1\uFF1A",-1)),xa={class:"mt-10px"},wa=Te(()=>f("span",null,"\u8D26 \u53F7\uFF1A",-1)),_a=oe("\u53D1\u6D88\u606F"),ka=oe(" user "),Ca={class:"text-left mt-20px"},Ea=Te(()=>f("div",{class:"text-center text-26px fw-700 mb-30px",style:{color:"var(--ep-color-primary-light-3)"}},"\u6211\u7684\u4FE1\u606F",-1)),Sa=Te(()=>f("span",null,"\u90AE \u7BB1\uFF1A",-1)),Aa={class:"mt-10px"},Da=Te(()=>f("span",null,"\u8D26 \u53F7\uFF1A",-1)),Ia=H({__name:"ChatContent",setup(o){const e=_e(),t=B(null);be(()=>{xe(()=>{e.chatScrollbar=t.value})});const r=D(()=>e.conversitionList.filter(n=>{var c,i,p,u;return n.sendId==((c=e.userInfo)==null?void 0:c.id)&&n.recipientId==((i=e.recipient)==null?void 0:i.id)||n.recipientId==((p=e.userInfo)==null?void 0:p.id)&&n.sendId==((u=e.recipient)==null?void 0:u.id)})),a=D(()=>(n,c,i)=>n&&c===0||n&&n.timestamp-i[c-1].timestamp>5*60*1e3?`- - ${na(n.timestamp)} - -`:"");function s(){var c,i;if(e.sessionSelectId=e.readyRecipient.id,e.recipient=e.readyRecipient,e.navId="1",e.initEditor(),!((i=(c=e.sessionList.filter(p=>{var u;return p.id==((u=e.readyRecipient)==null?void 0:u.id)}))==null?void 0:c.length)!=null?i:0)){e.sessionList.push(e.readyRecipient);let p={recipient:e.readyRecipient};e.socket.emit("insertHistorySession",p)}e.toBottom(),e.changeReaded(e.readyRecipient.id)}return(n,c)=>{const i=aa,p=So,u=vi,g=U,d=Ve,C=eo,x=ra,w=Ze;return m(),k("div",sa,[ze(f("div",null,[b(i),f("div",ca,[b(C,{class:"rounded-6px box-border","max-height":"100%",ref_key:"chatScrollbar",ref:t,style:{background:"var(--ep-color-primary-light-9)"}},{default:_(()=>[f("div",pa,[(m(!0),k(Z,null,Pe(l(r),(S,T)=>{var $;return m(),k(Z,{key:T},[f("div",da,Y(l(a)(S,T,l(r))),1),b(d,{type:"flex",class:E(["mb-20px",S.sendId==(($=l(e).userInfo)==null?void 0:$.id)&&"flex-row-reverse"])},{default:_(()=>{var P,M,v;return[b(p,{size:42,src:S.avatar},null,8,["src"]),S.type===0?(m(),k("div",{key:0,class:E([S.sendId==((P=l(e).userInfo)==null?void 0:P.id)?"mr-10px":"ml-10px","text break-words px-15px rounded-6px text-left py-12px"]),style:{color:"var(--ep-color-primary)"},innerHTML:S.content},null,10,ha)):(m(),k("div",{key:1,class:E(S.sendId==((M=l(e).userInfo)==null?void 0:M.id)?"mr-10px":"ml-10px")},[S.type===1?(m(),F(u,{key:0,class:"w-200px ha max-h-200px",src:S.content,"preview-src-list":[S.content],"initial-index":4,fit:"cover"},null,8,["src","preview-src-list"])):N("",!0),S.type===2?(m(),k("video",ua,[f("source",{src:S.content,type:"video/mp4"},null,8,fa),ga])):N("",!0)],2)),S.status===0?(m(),F(g,{key:2,class:E([S.sendId==((v=l(e).userInfo)==null?void 0:v.id)?"mr-10px":"ml-10px","is-loading pt-5px"]),size:"40px"},{default:_(()=>[ma]),_:2},1032,["class"])):N("",!0)]}),_:2},1032,["class"])],64)}),128))])]),_:1},512)]),b(x,{class:"mt-20px"})],512),[[Fe,l(e).navId==="1"&&l(e).sessionSelectId!==0]]),l(e).navId==="2"&&l(e).allSessionSelectId!==0?(m(),F(d,{key:0,class:"lg:h-736px h-500px px-20px",type:"flex",align:"middle",justify:"center"},{default:_(()=>{var S,T,$;return[f("div",null,[b(p,{size:120,src:(S=l(e).readyRecipient)==null?void 0:S.avatar},{default:_(()=>[ba]),_:1},8,["src"]),f("div",ya,[f("div",null,[va,oe(" "+Y((T=l(e).readyRecipient)==null?void 0:T.email),1)]),f("div",xa,[wa,oe(" "+Y(($=l(e).readyRecipient)==null?void 0:$.name),1)])]),b(w,{type:"primary",size:"large",round:"",class:"w-180px mt-30px",onClick:s},{default:_(()=>[_a]),_:1})])]}),_:1})):l(e).navId!=="1"||l(e).sessionSelectId===0?(m(),F(d,{key:1,type:"flex",align:"middle",justify:"center",class:"lg:h-736px h-500px"},{default:_(()=>{var S,T,$;return[f("div",null,[b(p,{size:120,src:(S=l(e).userInfo)==null?void 0:S.avatar},{default:_(()=>[ka]),_:1},8,["src"]),f("div",Ca,[Ea,f("div",null,[Sa,oe(" "+Y((T=l(e).userInfo)==null?void 0:T.email),1)]),f("div",Aa,[Da,oe(" "+Y(($=l(e).userInfo)==null?void 0:$.name),1)])])])]}),_:1})):N("",!0)])}}});var Ta=Ie(Ia,[["__scopeId","data-v-38e580f2"]]);const Ba={class:"chat-session lg:w-20% w-70% p-8px box-border"},Na=["onClick"],La={class:"w-50% ml-10px text-left"},Ra={class:"truncate"},Oa=["innerHTML"],$a=H({__name:"ChatDomain",setup(o){const e=_e(),t=D(()=>c=>s(c)),r=D(()=>e.navId==="1"?e.sessionList:e.allSessionList),a=D(()=>c=>{let i=e.conversitionList.filter(u=>{var g,d;return u.sendId===((g=e.userInfo)==null?void 0:g.id)&&u.recipientId===c||u.sendId===c&&u.recipientId===((d=e.userInfo)==null?void 0:d.id)}),p="";if(i.length>0){let u=i.length-1;switch(i[u].type){case 0:p=i[u].content;break;case 1:p="\u56FE\u7247";break;case 2:p="\u89C6\u9891";break}}return p});function s(c){return e.conversitionList.filter(p=>p.sendId===c&&p.recipientId===e.userInfo.id&&!p.isRead).length}function n(c){e.drawer=!1,e.navId==="1"?(e.sessionSelectId=c.id,e.recipient=c,e.changeReaded(c.id),e.initEditor(),e.toBottom()):e.navId==="2"&&(e.allSessionSelectId=c.id,e.readyRecipient=c)}return(c,i)=>{const p=So,u=at,g=Ve,d=li,C=eo;return m(),k("div",Ba,[b(C,{"max-height":"100%"},{default:_(()=>[(m(!0),k(Z,null,Pe(l(r),x=>(m(),k(Z,{key:x},[(m(),k("div",{key:0,class:E(["session-item px-20px py-10px cursor-pointer rounded-6px",[l(e).navId==="1"&&x.id===l(e).sessionSelectId||l(e).navId==="2"&&x.id===l(e).allSessionSelectId?"session-active":""]]),onClick:w=>n(x)},[b(g,{type:"flex",align:"middle"},{default:_(()=>[b(u,{value:l(t)(x.id),max:10,hidden:!(l(t)(x.id)&&l(e).navId==="1")},{default:_(()=>[b(p,{shape:"square",class:"!block",size:40,fit:"cover",src:x.avatar},null,8,["src"])]),_:2},1032,["value","hidden"]),f("div",La,[f("div",Ra,Y(x.email),1),ze(f("div",{class:"truncate text-12px mt-2px",style:{color:"var(--ep-color-primary-light-3)"},innerHTML:l(a)(x.id)},null,8,Oa),[[Fe,l(e).navId==="1"]])])]),_:2},1024)],10,Na))],64))),128)),l(r).length?N("",!0):(m(),F(d,{key:0,"image-size":100,description:"\u597D\u53CB\u5217\u8868\u4E3A\u7A7A"}))]),_:1})])}}});var za=Ie($a,[["__scopeId","data-v-9bb09f76"]]);const Fa=o=>(Co("data-v-1ef837ae"),o=o(),Eo(),o),Ma={class:"lg:w-7% w-30%"},Pa={align:"center",class:"mb-20px"},Va=oe("user"),Ha=["title"],qa=oe("\u9000\u51FA\u804A\u5929"),Ya=Fa(()=>f("i",{i:"ep-switch-button",class:"fw-bold"},null,-1)),Ua=H({__name:"ChatNav",setup(o){const e=_e();function t(){e.logout(),uo.replace({name:"Login"})}const r=D(()=>s=>s!=="1"?0:e.conversitionList.filter(c=>{var i;return c.recipientId==((i=e.userInfo)==null?void 0:i.id)&&!c.isRead}).length),a=s=>{if(e.navId!==s&&(e.navId=s,e.navId==="1"&&e.sessionSelectId)){e.conversitionList.forEach(c=>{var i;c.sendId===e.sessionSelectId&&c.recipientId===((i=e.userInfo)==null?void 0:i.id)&&!c.isRead&&(c.isRead=!0)});const n={sendId:e.sessionSelectId};e.socket.emit("changeMsgRead",n)}};return(s,n)=>{const c=So,i=at,p=ar,u=ko,g=Ze,d=ir;return m(),k("div",Ma,[b(d,{"default-active":"2",class:"h-100%",onSelect:a},{default:_(()=>{var C,x,w;return[f("div",Pa,[b(c,{src:(C=l(e).userInfo)==null?void 0:C.avatar},{default:_(()=>[Va]),_:1},8,["src"]),f("div",{class:"truncate mt-10px text-14px",title:(x=l(e).userInfo)==null?void 0:x.email,style:{width:"80%"}},Y((w=l(e).userInfo)==null?void 0:w.email),9,Ha)]),(m(!0),k(Z,null,Pe(l(e).navList,S=>(m(),k("div",{key:S.index},[b(u,{placement:"left"},{content:_(()=>[oe(Y(S.lable),1)]),default:_(()=>[b(p,{index:S.index,class:"justify-center fw-bold text-24px"},{default:_(()=>[b(i,{value:l(r)(S.index),hidden:!l(r)(S.index),max:10},{default:_(()=>[f("div",{class:E(S.icon)},null,2)]),_:2},1032,["value","hidden"])]),_:2},1032,["index"])]),_:2},1024)]))),128)),b(u,{placement:"left"},{content:_(()=>[qa]),default:_(()=>[b(g,{type:"danger",class:"mt-40px",size:"large",circle:"",onClick:t},{default:_(()=>[Ya]),_:1})]),_:1})]}),_:1})])}}});var Wa=Ie(Ua,[["__scopeId","data-v-1ef837ae"]]);const pe=Object.create(null);pe.open="0";pe.close="1";pe.ping="2";pe.pong="3";pe.message="4";pe.upgrade="5";pe.noop="6";const Ke=Object.create(null);Object.keys(pe).forEach(o=>{Ke[pe[o]]=o});const ja={type:"error",data:"parser error"},Ka=typeof Blob=="function"||typeof Blob!="undefined"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Xa=typeof ArrayBuffer=="function",Ga=o=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(o):o&&o.buffer instanceof ArrayBuffer,st=({type:o,data:e},t,r)=>Ka&&e instanceof Blob?t?r(e):Mo(e,r):Xa&&(e instanceof ArrayBuffer||Ga(e))?t?r(e):Mo(new Blob([e]),r):r(pe[o]+(e||"")),Mo=(o,e)=>{const t=new FileReader;return t.onload=function(){const r=t.result.split(",")[1];e("b"+r)},t.readAsDataURL(o)},Po="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Le=typeof Uint8Array=="undefined"?[]:new Uint8Array(256);for(let o=0;o<Po.length;o++)Le[Po.charCodeAt(o)]=o;const Ja=o=>{let e=o.length*.75,t=o.length,r,a=0,s,n,c,i;o[o.length-1]==="="&&(e--,o[o.length-2]==="="&&e--);const p=new ArrayBuffer(e),u=new Uint8Array(p);for(r=0;r<t;r+=4)s=Le[o.charCodeAt(r)],n=Le[o.charCodeAt(r+1)],c=Le[o.charCodeAt(r+2)],i=Le[o.charCodeAt(r+3)],u[a++]=s<<2|n>>4,u[a++]=(n&15)<<4|c>>2,u[a++]=(c&3)<<6|i&63;return p},Za=typeof ArrayBuffer=="function",ct=(o,e)=>{if(typeof o!="string")return{type:"message",data:pt(o,e)};const t=o.charAt(0);return t==="b"?{type:"message",data:Qa(o.substring(1),e)}:Ke[t]?o.length>1?{type:Ke[t],data:o.substring(1)}:{type:Ke[t]}:ja},Qa=(o,e)=>{if(Za){const t=Ja(o);return pt(t,e)}else return{base64:!0,data:o}},pt=(o,e)=>{switch(e){case"blob":return o instanceof ArrayBuffer?new Blob([o]):o;case"arraybuffer":default:return o}},dt=String.fromCharCode(30),en=(o,e)=>{const t=o.length,r=new Array(t);let a=0;o.forEach((s,n)=>{st(s,!1,c=>{r[n]=c,++a===t&&e(r.join(dt))})})},on=(o,e)=>{const t=o.split(dt),r=[];for(let a=0;a<t.length;a++){const s=ct(t[a],e);if(r.push(s),s.type==="error")break}return r},ht=4;function V(o){if(o)return tn(o)}function tn(o){for(var e in V.prototype)o[e]=V.prototype[e];return o}V.prototype.on=V.prototype.addEventListener=function(o,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+o]=this._callbacks["$"+o]||[]).push(e),this};V.prototype.once=function(o,e){function t(){this.off(o,t),e.apply(this,arguments)}return t.fn=e,this.on(o,t),this};V.prototype.off=V.prototype.removeListener=V.prototype.removeAllListeners=V.prototype.removeEventListener=function(o,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var t=this._callbacks["$"+o];if(!t)return this;if(arguments.length==1)return delete this._callbacks["$"+o],this;for(var r,a=0;a<t.length;a++)if(r=t[a],r===e||r.fn===e){t.splice(a,1);break}return t.length===0&&delete this._callbacks["$"+o],this};V.prototype.emit=function(o){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),t=this._callbacks["$"+o],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(t){t=t.slice(0);for(var r=0,a=t.length;r<a;++r)t[r].apply(this,e)}return this};V.prototype.emitReserved=V.prototype.emit;V.prototype.listeners=function(o){return this._callbacks=this._callbacks||{},this._callbacks["$"+o]||[]};V.prototype.hasListeners=function(o){return!!this.listeners(o).length};const ve=(()=>typeof self!="undefined"?self:typeof window!="undefined"?window:Function("return this")())();function ut(o,...e){return e.reduce((t,r)=>(o.hasOwnProperty(r)&&(t[r]=o[r]),t),{})}const rn=setTimeout,ln=clearTimeout;function oo(o,e){e.useNativeTimers?(o.setTimeoutFn=rn.bind(ve),o.clearTimeoutFn=ln.bind(ve)):(o.setTimeoutFn=setTimeout.bind(ve),o.clearTimeoutFn=clearTimeout.bind(ve))}const an=1.33;function nn(o){return typeof o=="string"?sn(o):Math.ceil((o.byteLength||o.size)*an)}function sn(o){let e=0,t=0;for(let r=0,a=o.length;r<a;r++)e=o.charCodeAt(r),e<128?t+=1:e<2048?t+=2:e<55296||e>=57344?t+=3:(r++,t+=4);return t}class cn extends Error{constructor(e,t,r){super(e),this.description=t,this.context=r,this.type="TransportError"}}class ft extends V{constructor(e){super(),this.writable=!1,oo(this,e),this.opts=e,this.query=e.query,this.readyState="",this.socket=e.socket}onError(e,t,r){return super.emitReserved("error",new cn(e,t,r)),this}open(){return(this.readyState==="closed"||this.readyState==="")&&(this.readyState="opening",this.doOpen()),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=ct(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}}const gt="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),go=64,pn={};let Vo=0,Ue=0,Ho;function qo(o){let e="";do e=gt[o%go]+e,o=Math.floor(o/go);while(o>0);return e}function mt(){const o=qo(+new Date);return o!==Ho?(Vo=0,Ho=o):o+"."+qo(Vo++)}for(;Ue<go;Ue++)pn[gt[Ue]]=Ue;function bt(o){let e="";for(let t in o)o.hasOwnProperty(t)&&(e.length&&(e+="&"),e+=encodeURIComponent(t)+"="+encodeURIComponent(o[t]));return e}function dn(o){let e={},t=o.split("&");for(let r=0,a=t.length;r<a;r++){let s=t[r].split("=");e[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return e}let yt=!1;try{yt=typeof XMLHttpRequest!="undefined"&&"withCredentials"in new XMLHttpRequest}catch{}const hn=yt;function vt(o){const e=o.xdomain;try{if(typeof XMLHttpRequest!="undefined"&&(!e||hn))return new XMLHttpRequest}catch{}if(!e)try{return new ve[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}function un(){}const fn=function(){return new vt({xdomain:!1}).responseType!=null}();class gn extends ft{constructor(e){if(super(e),this.polling=!1,typeof location!="undefined"){const r=location.protocol==="https:";let a=location.port;a||(a=r?"443":"80"),this.xd=typeof location!="undefined"&&e.hostname!==location.hostname||a!==e.port,this.xs=e.secure!==r}const t=e&&e.forceBase64;this.supportsBinary=fn&&!t}get name(){return"polling"}doOpen(){this.poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this.polling||!this.writable){let r=0;this.polling&&(r++,this.once("pollComplete",function(){--r||t()})),this.writable||(r++,this.once("drain",function(){--r||t()}))}else t()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const t=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};on(e,this.socket.binaryType).forEach(t),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this.poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,en(e,t=>{this.doWrite(t,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){let e=this.query||{};const t=this.opts.secure?"https":"http";let r="";this.opts.timestampRequests!==!1&&(e[this.opts.timestampParam]=mt()),!this.supportsBinary&&!e.sid&&(e.b64=1),this.opts.port&&(t==="https"&&Number(this.opts.port)!==443||t==="http"&&Number(this.opts.port)!==80)&&(r=":"+this.opts.port);const a=bt(e),s=this.opts.hostname.indexOf(":")!==-1;return t+"://"+(s?"["+this.opts.hostname+"]":this.opts.hostname)+r+this.opts.path+(a.length?"?"+a:"")}request(e={}){return Object.assign(e,{xd:this.xd,xs:this.xs},this.opts),new ce(this.uri(),e)}doWrite(e,t){const r=this.request({method:"POST",data:e});r.on("success",t),r.on("error",(a,s)=>{this.onError("xhr post error",a,s)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(t,r)=>{this.onError("xhr poll error",t,r)}),this.pollXhr=e}}class ce extends V{constructor(e,t){super(),oo(this,t),this.opts=t,this.method=t.method||"GET",this.uri=e,this.async=t.async!==!1,this.data=t.data!==void 0?t.data:null,this.create()}create(){const e=ut(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this.opts.xd,e.xscheme=!!this.opts.xs;const t=this.xhr=new vt(e);try{t.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){t.setDisableHeaderCheck&&t.setDisableHeaderCheck(!0);for(let r in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(r)&&t.setRequestHeader(r,this.opts.extraHeaders[r])}}catch{}if(this.method==="POST")try{t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{t.setRequestHeader("Accept","*/*")}catch{}"withCredentials"in t&&(t.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(t.timeout=this.opts.requestTimeout),t.onreadystatechange=()=>{t.readyState===4&&(t.status===200||t.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof t.status=="number"?t.status:0)},0))},t.send(this.data)}catch(r){this.setTimeoutFn(()=>{this.onError(r)},0);return}typeof document!="undefined"&&(this.index=ce.requestsCount++,ce.requests[this.index]=this)}onError(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}cleanup(e){if(!(typeof this.xhr=="undefined"||this.xhr===null)){if(this.xhr.onreadystatechange=un,e)try{this.xhr.abort()}catch{}typeof document!="undefined"&&delete ce.requests[this.index],this.xhr=null}}onLoad(){const e=this.xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}ce.requestsCount=0;ce.requests={};if(typeof document!="undefined"){if(typeof attachEvent=="function")attachEvent("onunload",Yo);else if(typeof addEventListener=="function"){const o="onpagehide"in ve?"pagehide":"unload";addEventListener(o,Yo,!1)}}function Yo(){for(let o in ce.requests)ce.requests.hasOwnProperty(o)&&ce.requests[o].abort()}const mn=(()=>typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,t)=>t(e,0))(),We=ve.WebSocket||ve.MozWebSocket,Uo=!0,bn="arraybuffer",Wo=typeof navigator!="undefined"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class yn extends ft{constructor(e){super(e),this.supportsBinary=!e.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const e=this.uri(),t=this.opts.protocols,r=Wo?{}:ut(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=Uo&&!Wo?t?new We(e,t):new We(e):new We(e,t,r)}catch(a){return this.emitReserved("error",a)}this.ws.binaryType=this.socket.binaryType||bn,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const r=e[t],a=t===e.length-1;st(r,this.supportsBinary,s=>{const n={};try{Uo&&this.ws.send(s)}catch{}a&&mn(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws!="undefined"&&(this.ws.close(),this.ws=null)}uri(){let e=this.query||{};const t=this.opts.secure?"wss":"ws";let r="";this.opts.port&&(t==="wss"&&Number(this.opts.port)!==443||t==="ws"&&Number(this.opts.port)!==80)&&(r=":"+this.opts.port),this.opts.timestampRequests&&(e[this.opts.timestampParam]=mt()),this.supportsBinary||(e.b64=1);const a=bt(e),s=this.opts.hostname.indexOf(":")!==-1;return t+"://"+(s?"["+this.opts.hostname+"]":this.opts.hostname)+r+this.opts.path+(a.length?"?"+a:"")}check(){return!!We}}const vn={websocket:yn,polling:gn},xn=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,wn=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function mo(o){const e=o,t=o.indexOf("["),r=o.indexOf("]");t!=-1&&r!=-1&&(o=o.substring(0,t)+o.substring(t,r).replace(/:/g,";")+o.substring(r,o.length));let a=xn.exec(o||""),s={},n=14;for(;n--;)s[wn[n]]=a[n]||"";return t!=-1&&r!=-1&&(s.source=e,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=_n(s,s.path),s.queryKey=kn(s,s.query),s}function _n(o,e){const t=/\/{2,9}/g,r=e.replace(t,"/").split("/");return(e.substr(0,1)=="/"||e.length===0)&&r.splice(0,1),e.substr(e.length-1,1)=="/"&&r.splice(r.length-1,1),r}function kn(o,e){const t={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,a,s){a&&(t[a]=s)}),t}class ye extends V{constructor(e,t={}){super(),e&&typeof e=="object"&&(t=e,e=null),e?(e=mo(e),t.hostname=e.host,t.secure=e.protocol==="https"||e.protocol==="wss",t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=mo(t.host).host),oo(this,t),this.secure=t.secure!=null?t.secure:typeof location!="undefined"&&location.protocol==="https:",t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||(typeof location!="undefined"?location.hostname:"localhost"),this.port=t.port||(typeof location!="undefined"&&location.port?location.port:this.secure?"443":"80"),this.transports=t.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},t),this.opts.path=this.opts.path.replace(/\/$/,"")+"/",typeof this.opts.query=="string"&&(this.opts.query=dn(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&addEventListener("beforeunload",()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},!1),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=ht,t.transport=e,this.id&&(t.sid=this.id);const r=Object.assign({},this.opts.transportOptions[e],this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new vn[e](r)}open(){let e;if(this.opts.rememberUpgrade&&ye.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)e="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else e=this.transports[0];this.readyState="opening";try{e=this.createTransport(e)}catch{this.transports.shift(),this.open();return}e.open(),this.setTransport(e)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",t=>this.onClose("transport close",t))}probe(e){let t=this.createTransport(e),r=!1;ye.priorWebsocketSuccess=!1;const a=()=>{r||(t.send([{type:"ping",data:"probe"}]),t.once("packet",g=>{if(!r)if(g.type==="pong"&&g.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;ye.priorWebsocketSuccess=t.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(u(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{const d=new Error("probe error");d.transport=t.name,this.emitReserved("upgradeError",d)}}))};function s(){r||(r=!0,u(),t.close(),t=null)}const n=g=>{const d=new Error("probe error: "+g);d.transport=t.name,s(),this.emitReserved("upgradeError",d)};function c(){n("transport closed")}function i(){n("socket closed")}function p(g){t&&g.name!==t.name&&s()}const u=()=>{t.removeListener("open",a),t.removeListener("error",n),t.removeListener("close",c),this.off("close",i),this.off("upgrading",p)};t.once("open",a),t.once("error",n),t.once("close",c),this.once("close",i),this.once("upgrading",p),t.open()}onOpen(){if(this.readyState="open",ye.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade&&this.transport.pause){let e=0;const t=this.upgrades.length;for(;e<t;e++)this.probe(this.upgrades[e])}}onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this.getWritablePackets();this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let t=1;for(let r=0;r<this.writeBuffer.length;r++){const a=this.writeBuffer[r].data;if(a&&(t+=nn(a)),r>0&&t>this.maxPayload)return this.writeBuffer.slice(0,r);t+=2}return this.writeBuffer}write(e,t,r){return this.sendPacket("message",e,t,r),this}send(e,t,r){return this.sendPacket("message",e,t,r),this}sendPacket(e,t,r,a){if(typeof t=="function"&&(a=t,t=void 0),typeof r=="function"&&(a=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const s={type:e,data:t,options:r};this.emitReserved("packetCreate",s),this.writeBuffer.push(s),a&&this.once("flush",a),this.flush()}close(){const e=()=>{this.onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},r=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}onError(e){ye.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}onClose(e,t){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&removeEventListener("offline",this.offlineEventListener,!1),this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(e){const t=[];let r=0;const a=e.length;for(;r<a;r++)~this.transports.indexOf(e[r])&&t.push(e[r]);return t}}ye.protocol=ht;function Cn(o,e="",t){let r=o;t=t||typeof location!="undefined"&&location,o==null&&(o=t.protocol+"//"+t.host),typeof o=="string"&&(o.charAt(0)==="/"&&(o.charAt(1)==="/"?o=t.protocol+o:o=t.host+o),/^(https?|wss?):\/\//.test(o)||(typeof t!="undefined"?o=t.protocol+"//"+o:o="https://"+o),r=mo(o)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const s=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+s+":"+r.port+e,r.href=r.protocol+"://"+s+(t&&t.port===r.port?"":":"+r.port),r}const En=typeof ArrayBuffer=="function",Sn=o=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(o):o.buffer instanceof ArrayBuffer,xt=Object.prototype.toString,An=typeof Blob=="function"||typeof Blob!="undefined"&&xt.call(Blob)==="[object BlobConstructor]",Dn=typeof File=="function"||typeof File!="undefined"&&xt.call(File)==="[object FileConstructor]";function Ao(o){return En&&(o instanceof ArrayBuffer||Sn(o))||An&&o instanceof Blob||Dn&&o instanceof File}function Xe(o,e){if(!o||typeof o!="object")return!1;if(Array.isArray(o)){for(let t=0,r=o.length;t<r;t++)if(Xe(o[t]))return!0;return!1}if(Ao(o))return!0;if(o.toJSON&&typeof o.toJSON=="function"&&arguments.length===1)return Xe(o.toJSON(),!0);for(const t in o)if(Object.prototype.hasOwnProperty.call(o,t)&&Xe(o[t]))return!0;return!1}function In(o){const e=[],t=o.data,r=o;return r.data=bo(t,e),r.attachments=e.length,{packet:r,buffers:e}}function bo(o,e){if(!o)return o;if(Ao(o)){const t={_placeholder:!0,num:e.length};return e.push(o),t}else if(Array.isArray(o)){const t=new Array(o.length);for(let r=0;r<o.length;r++)t[r]=bo(o[r],e);return t}else if(typeof o=="object"&&!(o instanceof Date)){const t={};for(const r in o)Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=bo(o[r],e));return t}return o}function Tn(o,e){return o.data=yo(o.data,e),o.attachments=void 0,o}function yo(o,e){if(!o)return o;if(o&&o._placeholder===!0){if(typeof o.num=="number"&&o.num>=0&&o.num<e.length)return e[o.num];throw new Error("illegal attachments")}else if(Array.isArray(o))for(let t=0;t<o.length;t++)o[t]=yo(o[t],e);else if(typeof o=="object")for(const t in o)Object.prototype.hasOwnProperty.call(o,t)&&(o[t]=yo(o[t],e));return o}const Bn=5;var L;(function(o){o[o.CONNECT=0]="CONNECT",o[o.DISCONNECT=1]="DISCONNECT",o[o.EVENT=2]="EVENT",o[o.ACK=3]="ACK",o[o.CONNECT_ERROR=4]="CONNECT_ERROR",o[o.BINARY_EVENT=5]="BINARY_EVENT",o[o.BINARY_ACK=6]="BINARY_ACK"})(L||(L={}));class Nn{constructor(e){this.replacer=e}encode(e){return(e.type===L.EVENT||e.type===L.ACK)&&Xe(e)?(e.type=e.type===L.EVENT?L.BINARY_EVENT:L.BINARY_ACK,this.encodeAsBinary(e)):[this.encodeAsString(e)]}encodeAsString(e){let t=""+e.type;return(e.type===L.BINARY_EVENT||e.type===L.BINARY_ACK)&&(t+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(t+=e.nsp+","),e.id!=null&&(t+=e.id),e.data!=null&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=In(e),r=this.encodeAsString(t.packet),a=t.buffers;return a.unshift(r),a}}class Do extends V{constructor(e){super(),this.reviver=e}add(e){let t;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e),t.type===L.BINARY_EVENT||t.type===L.BINARY_ACK?(this.reconstructor=new Ln(t),t.attachments===0&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else if(Ao(e)||e.base64)if(this.reconstructor)t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let t=0;const r={type:Number(e.charAt(0))};if(L[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===L.BINARY_EVENT||r.type===L.BINARY_ACK){const s=t+1;for(;e.charAt(++t)!=="-"&&t!=e.length;);const n=e.substring(s,t);if(n!=Number(n)||e.charAt(t)!=="-")throw new Error("Illegal attachments");r.attachments=Number(n)}if(e.charAt(t+1)==="/"){const s=t+1;for(;++t&&!(e.charAt(t)===","||t===e.length););r.nsp=e.substring(s,t)}else r.nsp="/";const a=e.charAt(t+1);if(a!==""&&Number(a)==a){const s=t+1;for(;++t;){const n=e.charAt(t);if(n==null||Number(n)!=n){--t;break}if(t===e.length)break}r.id=Number(e.substring(s,t+1))}if(e.charAt(++t)){const s=this.tryParse(e.substr(t));if(Do.isPayloadValid(r.type,s))r.data=s;else throw new Error("invalid payload")}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,t){switch(e){case L.CONNECT:return typeof t=="object";case L.DISCONNECT:return t===void 0;case L.CONNECT_ERROR:return typeof t=="string"||typeof t=="object";case L.EVENT:case L.BINARY_EVENT:return Array.isArray(t)&&t.length>0;case L.ACK:case L.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}class Ln{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const t=Tn(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}var Rn=Object.freeze(Object.defineProperty({__proto__:null,protocol:Bn,get PacketType(){return L},Encoder:Nn,Decoder:Do},Symbol.toStringTag,{value:"Module"}));function ie(o,e,t){return o.on(e,t),function(){o.off(e,t)}}const On=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class wt extends V{constructor(e,t,r){super(),this.connected=!1,this.receiveBuffer=[],this.sendBuffer=[],this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,r&&r.auth&&(this.auth=r.auth),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[ie(e,"open",this.onopen.bind(this)),ie(e,"packet",this.onpacket.bind(this)),ie(e,"error",this.onerror.bind(this)),ie(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){if(On.hasOwnProperty(e))throw new Error('"'+e+'" is a reserved event name');t.unshift(e);const r={type:L.EVENT,data:t};if(r.options={},r.options.compress=this.flags.compress!==!1,typeof t[t.length-1]=="function"){const n=this.ids++,c=t.pop();this._registerAckCallback(n,c),r.id=n}const a=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!a||!this.connected)||(this.connected?(this.notifyOutgoingListeners(r),this.packet(r)):this.sendBuffer.push(r)),this.flags={},this}_registerAckCallback(e,t){const r=this.flags.timeout;if(r===void 0){this.acks[e]=t;return}const a=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let s=0;s<this.sendBuffer.length;s++)this.sendBuffer[s].id===e&&this.sendBuffer.splice(s,1);t.call(this,new Error("operation has timed out"))},r);this.acks[e]=(...s)=>{this.io.clearTimeoutFn(a),t.apply(this,[null,...s])}}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this.packet({type:L.CONNECT,data:e})}):this.packet({type:L.CONNECT,data:this.auth})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t)}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case L.CONNECT:if(e.data&&e.data.sid){const a=e.data.sid;this.onconnect(a)}else this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case L.EVENT:case L.BINARY_EVENT:this.onevent(e);break;case L.ACK:case L.BINARY_ACK:this.onack(e);break;case L.DISCONNECT:this.ondisconnect();break;case L.CONNECT_ERROR:this.destroy();const r=new Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r);break}}onevent(e){const t=e.data||[];e.id!=null&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const r of t)r.apply(this,e)}super.emit.apply(this,e)}ack(e){const t=this;let r=!1;return function(...a){r||(r=!0,t.packet({type:L.ACK,id:e,data:a}))}}onack(e){const t=this.acks[e.id];typeof t=="function"&&(t.apply(this,e.data),delete this.acks[e.id])}onconnect(e){this.id=e,this.connected=!0,this.emitBuffered(),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:L.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let r=0;r<t.length;r++)if(e===t[r])return t.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let r=0;r<t.length;r++)if(e===t[r])return t.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const r of t)r.apply(this,e.data)}}}function Be(o){o=o||{},this.ms=o.min||100,this.max=o.max||1e4,this.factor=o.factor||2,this.jitter=o.jitter>0&&o.jitter<=1?o.jitter:0,this.attempts=0}Be.prototype.duration=function(){var o=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),t=Math.floor(e*this.jitter*o);o=(Math.floor(e*10)&1)==0?o-t:o+t}return Math.min(o,this.max)|0};Be.prototype.reset=function(){this.attempts=0};Be.prototype.setMin=function(o){this.ms=o};Be.prototype.setMax=function(o){this.max=o};Be.prototype.setJitter=function(o){this.jitter=o};class vo extends V{constructor(e,t){var r;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.opts=t,oo(this,t),this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor((r=t.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new Be({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(t.timeout==null?2e4:t.timeout),this._readyState="closed",this.uri=e;const a=t.parser||Rn;this.encoder=new a.Encoder,this.decoder=new a.Decoder,this._autoConnect=t.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(t=this.backoff)===null||t===void 0||t.setMin(e),this)}randomizationFactor(e){var t;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(t=this.backoff)===null||t===void 0||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(t=this.backoff)===null||t===void 0||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new ye(this.uri,this.opts);const t=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const a=ie(t,"open",function(){r.onopen(),e&&e()}),s=ie(t,"error",n=>{r.cleanup(),r._readyState="closed",this.emitReserved("error",n),e?e(n):r.maybeReconnectOnOpen()});if(this._timeout!==!1){const n=this._timeout;n===0&&a();const c=this.setTimeoutFn(()=>{a(),t.close(),t.emit("error",new Error("timeout"))},n);this.opts.autoUnref&&c.unref(),this.subs.push(function(){clearTimeout(c)})}return this.subs.push(a),this.subs.push(s),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(ie(e,"ping",this.onping.bind(this)),ie(e,"data",this.ondata.bind(this)),ie(e,"error",this.onerror.bind(this)),ie(e,"close",this.onclose.bind(this)),ie(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){this.decoder.add(e)}ondecoded(e){this.emitReserved("packet",e)}onerror(e){this.emitReserved("error",e)}socket(e,t){let r=this.nsps[e];return r||(r=new wt(this,e,t),this.nsps[e]=r),r}_destroy(e){const t=Object.keys(this.nsps);for(const r of t)if(this.nsps[r].active)return;this._close()}_packet(e){const t=this.encoder.encode(e);for(let r=0;r<t.length;r++)this.engine.write(t[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(e,t){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(a=>{a?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",a)):e.onreconnect()}))},t);this.opts.autoUnref&&r.unref(),this.subs.push(function(){clearTimeout(r)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Ne={};function Ge(o,e){typeof o=="object"&&(e=o,o=void 0),e=e||{};const t=Cn(o,e.path||"/socket.io"),r=t.source,a=t.id,s=t.path,n=Ne[a]&&s in Ne[a].nsps,c=e.forceNew||e["force new connection"]||e.multiplex===!1||n;let i;return c?i=new vo(r,e):(Ne[a]||(Ne[a]=new vo(r,e)),i=Ne[a]),t.query&&!e.query&&(e.query=t.queryKey),i.socket(t.path,e)}Object.assign(Ge,{Manager:vo,Socket:wt,io:Ge,connect:Ge});const $n={key:0,class:"i-ep-expand"},zn={key:1,class:"i-ep-fold"},Fn=H({__name:"ChatContainer",setup(o){const e=_e(),{proxy:t}=Me(),r="http://localhost:5323";be(()=>{a()});async function a(){e.token&&(n(),e.allSessionList.length||s())}function s(){nr().then(c=>{(c==null?void 0:c.code)==200?e.allSessionList=c==null?void 0:c.data:t.$message.error(c==null?void 0:c.message)})}function n(){e.socket=Ge(r,{auth:{token:e.token}}),e.socket.on("connect",()=>{console.log("\u8FDE\u63A5\u6210\u529F"),e.socket.emit("joinChat")}),e.socket.on("disconnect",()=>{console.log("\u8FDE\u63A5\u5DF2\u65AD\u5F00")}),e.socket.on("changMsgstatus",c=>{e.conversitionList.map(i=>{i.timestamp!=null&&i.timestamp==c.timestamp&&(i.status=1)})}),e.socket.on("joinSuccess",c=>{e.userInfo&&(e.userInfo.onlineStatus=!0),e.conversitionList=c.conversition,e.sessionList=c.historySessionList}),e.socket.on("reviceMsg",c=>{var p,u,g;if(c.recipientId==((p=e.userInfo)==null?void 0:p.id)){e.playMusic(),window.Notification&&Notification.permission!=="denied"&&Notification.requestPermission(function(d){new Notification("\u6D88\u606F\u901A\u77E5",{body:"\u4F60\u6709\u4E00\u6761\u65B0\u7684\u6D88\u606F"})});for(let d of e.sessionList)if(d.id==c.sendId&&e.sessionSelectId==c.sendId&&e.navId==="1"){c.isRead=!0;let C={sendId:c.sendId};e.socket.emit("changeMsgRead",C);break}}if(e.sendLocal(c),((g=(u=e.sessionList.filter(d=>d.id==c.sendId))==null?void 0:u.length)!=null?g:0)===0){let d=e.allSessionList.filter(C=>C.id==c.sendId);e.sessionList.push(...d)}e.toBottom()}),e.socket.on("squeezeOut",()=>{e.logout(),ho.error("\u8D26\u6237\u5728\u5176\u5B83\u5730\u65B9\u767B\u9646\uFF0C\u4F1A\u8BDD\u5DF2\u65AD\u5F00\uFF01"),uo.push({name:"Login"})}),e.socket.on("forceOut",()=>{e.logout(),ho.error("\u767B\u5F55\u5DF2\u8FC7\u671F\uFF01"),uo.push({name:"Login"})})}return(c,i)=>{const p=Ze,u=Wa,g=za,d=Ve,C=ml,x=Ta;return m(),k(Z,null,[b(p,{class:"fixed top-58px left-10px z-2 p-2px text-16px",type:"primary",text:"",onClick:i[0]||(i[0]=w=>l(e).drawer=!l(e).drawer)},{default:_(()=>[l(e).drawer?(m(),k("i",zn)):(m(),k("i",$n))]),_:1}),b(d,{type:"flex",class:"w-full border-rounded-33px"},{default:_(()=>[b(C,{modelValue:l(e).drawer,"onUpdate:modelValue":i[1]||(i[1]=w=>l(e).drawer=w),size:"90%","lock-scroll":!0,direction:"ltr"},{default:_(()=>[b(d,null,{default:_(()=>[b(u),b(g)]),_:1})]),_:1},8,["modelValue"]),b(u,{class:"lg:block hidden"}),b(g,{class:"lg:block hidden"}),b(x)]),_:1})],64)}}});var Mn=Ie(Fn,[["__scopeId","data-v-6d39cf5c"]]);var Pn="/assets/notice.9ff3db20.mp3";const Vn=o=>(Co("data-v-24b9058b"),o=o(),Eo(),o),Hn=Vn(()=>f("audio",{id:"tip-music"},[f("source",{src:Pn,type:"audio/mp3"})],-1)),qn={absolute:"","right-30px":"","top-15px":""},Yn=H({__name:"Chat",setup(o){const e=_e();return J(()=>e.openMusic,(t,r)=>{t&&(e.tipMusic=document.getElementById("tipMusic"))}),(t,r)=>{const a=Pi,s=Mn,n=sr,c=Ve;return m(),k(Z,null,[Hn,f("div",qn,[b(a,{class:"chat-switch-music",modelValue:l(e).openMusic,"onUpdate:modelValue":r[0]||(r[0]=i=>l(e).openMusic=i),"inline-prompt":"","active-text":"\u5F00\u63D0\u793A","inactive-text":"\u5173\u63D0\u793A"},null,8,["modelValue"])]),b(c,{type:"flex",align:"middle",justify:"center"},{default:_(()=>[b(n,{shadow:"hover",class:"lg:w-1200px w-full mt-30px chat-container"},{default:_(()=>[b(s)]),_:1})]),_:1})],64)}}});var jn=Ie(Yn,[["__scopeId","data-v-24b9058b"]]);export{jn as default};
